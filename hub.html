<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>时间显示艺术</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);min-height:100vh;overflow-x:hidden;color:#f0f0f0}
        .container{padding:20px;max-width:600px;margin:0 auto}
        .header{text-align:center;margin-bottom:30px;background:rgba(255,255,255,.1);border-radius:20px;padding:20px;box-shadow:0 8px 32px rgba(0,0,0,.2);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}
        .beijing-time{font-size:2.5rem;font-weight:bold;color:#fff;margin-bottom:10px;text-shadow:0 0 10px rgba(255,255,255,.3)}
        .date-info{font-size:1rem;color:#e0e0e0}
        .time-display{background:rgba(255,255,255,.1);border-radius:20px;padding:25px;margin-bottom:25px;box-shadow:0 8px 32px rgba(0,0,0,.2);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}
        .time-display h3{color:#fff;margin-bottom:15px;font-size:1.2rem}
        .clock-container{display:flex;justify-content:center;align-items:center;height:200px}
        .clock{width:180px;height:180px;border:8px solid rgba(255,255,255,.2);border-radius:50%;position:relative;background:rgba(0,0,0,.2);box-shadow:0 0 20px rgba(0,0,0,.3)}
        .clock-center{width:10px;height:10px;background:#fff;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:3;box-shadow:0 0 5px rgba(255,255,255,.5)}
        .hand{position:absolute;top:50%;left:50%;transform-origin:bottom center;border-radius:4px;box-shadow:0 0 3px rgba(0,0,0,.3)}
        .hour-hand{width:6px;height:50px;background:#fff;margin-left:-3px;margin-top:-50px}
        .minute-hand{width:4px;height:70px;background:#fff;margin-left:-2px;margin-top:-70px}
        .second-hand{width:2px;height:80px;background:#ff6b6b;margin-left:-1px;margin-top:-80px}
        .clock-number{position:absolute;font-size:14px;font-weight:bold;color:#fff;text-shadow:0 0 3px rgba(0,0,0,.5)}
        .progress-container{margin:20px 0}
        .progress-bar{width:100%;height:40px;background:#e0e0e0;border-radius:20px;overflow:hidden;position:relative}
        .progress-fill{height:100%;background:linear-gradient(90deg,#00c9ff,#92fe9d);border-radius:20px;transition:width .5s ease;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;font-size:14px;box-shadow:0 0 10px rgba(0,201,255,.5)}
        .progress-time{text-align:center;margin-top:10px;font-size:1.1rem;color:#e0e0e0}
        .tetris-container{display:flex;flex-direction:column;align-items:center;margin:20px 0}
        .tetris-board{display:grid;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(20,1fr);gap:1px;background:rgba(0,0,0,.3);padding:10px;border-radius:8px;box-shadow:0 0 15px rgba(0,0,0,.3);width:250px;height:400px}
        .tetris-cell{background:rgba(255,255,255,.1);border-radius:2px;transition:all .3s ease}
        .tetris-cell.filled{background:linear-gradient(135deg,#00c9ff,#0072ff);box-shadow:0 0 5px rgba(0,201,255,.5);animation:placeBlock .3s ease}
        @keyframes placeBlock{0%{transform:scale(1.2);opacity:.8}100%{transform:scale(1);opacity:1}}
        .tetris-time{margin-top:15px;font-size:1.1rem;color:#e0e0e0}
        .tetris-info{display:flex;justify-content:space-between;width:250px;margin-bottom:10px;font-size:.9rem;color:#e0e0e0}

        /* ===== 时间沙漏 全新设计 ===== */
        .hourglass-container{display:flex;flex-direction:column;align-items:center;margin:20px 0}
        .hourglass-wrapper{position:relative;width:100px;height:200px;filter:drop-shadow(0 0 5px rgba(0,201,255,.4))}
        /* 玻璃外框 */
        .hourglass-frame{position:absolute;inset:0;border:3px solid rgba(255,255,255,.3);border-radius:5px;background:transparent}
        /* 上下锥体 */
        .hourglass-top,.hourglass-bottom{position:absolute;left:50%;width:70px;height:90px;background:rgba(0,0,0,.2);overflow:hidden}
        .hourglass-top{top:5px;transform:translateX(-50%);clip-path:polygon(0 0,100% 0,50% 100%)}
        .hourglass-bottom{bottom:5px;transform:translateX(-50%) rotate(180deg);clip-path:polygon(0 0,100% 0,50% 100%)}
        /* 渐变沙面 */
        .sand-surface-top,.sand-surface-bottom{position:absolute;left:0;right:0;height:100%;background:linear-gradient(180deg,#00c9ff 0%,#0072ff 100%);transition:height .5s ease}
        /* 落沙流光 */
        .sand-stream{position:absolute;top:50%;left:50%;width:2px;height:20px;background:linear-gradient(180deg,#00c9ff,#92fe9d);border-radius:1px;transform:translate(-50%,-50%);opacity:0;box-shadow:0 0 8px #00c9ff}
        .hourglass-time{margin-top:15px;font-size:1.1rem;color:#e0e0e0}
        .hourglass-info{display:flex;justify-content:space-between;width:100px;margin-bottom:10px;font-size:.9rem;color:#e0e0e0}

        .battery-container{display:flex;flex-direction:column;align-items:center;margin:20px 0}
        .battery{width:120px;height:60px;border:3px solid rgba(255,255,255,.3);border-radius:8px;position:relative;background:rgba(0,0,0,.2)}
        .battery::after{content:'';position:absolute;right:-8px;top:50%;transform:translateY(-50%);width:6px;height:20px;background:rgba(255,255,255,.3);border-radius:0 3px 3px 0}
        .battery-fill{position:absolute;left:2px;top:2px;bottom:2px;background:linear-gradient(90deg,#00c9ff,#92fe9d);border-radius:4px;transition:width .5s ease,background .5s ease;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;font-size:12px;box-shadow:0 0 8px rgba(0,201,255,.3)}
        .battery.charging .battery-fill{background:linear-gradient(90deg,#00d2ff,#3a7bd5);animation:pulse 1.5s infinite;box-shadow:0 0 12px rgba(0,210,255,.5)}
        @keyframes pulse{0%,100%{opacity:.8}50%{opacity:1}}
        .battery-time{margin-top:15px;font-size:1.1rem;color:#e0e0e0}
        .faucet-container{display:flex;flex-direction:column;align-items:center;margin:20px 0;position:relative;height:250px}
        .faucet{width:80px;height:40px;background:linear-gradient(135deg,#bdc3c7,#2c3e50);border-radius:10px 10px 0 0;position:relative;margin-bottom:20px;box-shadow:0 5px 15px rgba(0,0,0,.3)}
        .faucet::after{content:'';position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);width:8px;height:10px;background:#2c3e50;border-radius:0 0 4px 4px}
        .water-drop{position:absolute;width:8px;height:12px;background:linear-gradient(180deg,#00c9ff,#0072ff);border-radius:50% 50% 50% 50%/60% 60% 40% 40%;top:50px;left:50%;transform:translateX(-50%);animation:drop 1s infinite;box-shadow:0 0 5px rgba(0,201,255,.5)}
        @keyframes drop{0%{top:50px;opacity:1}100%{top:180px;opacity:0}}
        .cup{width:100px;height:120px;border:3px solid rgba(255,255,255,.3);border-radius:0 0 20px 20px;position:relative;overflow:hidden;background:rgba(0,0,0,.2);box-shadow:0 5px 15px rgba(0,0,0,.2)}
        .cup::before{content:'';position:absolute;right:-15px;top:20px;width:20px;height:30px;border:3px solid rgba(255,255,255,.3);border-left:none;border-radius:0 15px 15px 0}
        .water-level{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(180deg,#00c9ff,#0072ff);transition:height .5s ease;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;font-size:14px;box-shadow:0 0 10px rgba(0,201,255,.3)}
        .cup.tipping{animation:tip 1s ease-in-out}
        @keyframes tip{0%,100%{transform:rotate(0deg)}50%{transform:rotate(45deg)}}
        .faucet-time{margin-top:15px;font-size:1.1rem;color:#e0e0e0}
        @media (max-width:480px){.beijing-time{font-size:2rem}.clock{width:150px;height:150px}.hour-hand{height:40px;margin-top:-40px}.minute-hand{height:55px;margin-top:-55px}.second-hand{height:65px;margin-top:-65px}.tetris-board{width:200px;height:320px}.tetris-info{width:200px}}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="beijing-time" id="beijingTime">00:00:00</div>
            <div class="date-info" id="dateInfo">2024年1月1日 星期一</div>
        </div>

        <!-- 纯时钟 -->
        <div class="time-display">
            <h3>经典时钟</h3>
            <div class="clock-container">
                <div class="clock">
                    <div class="clock-number" style="top: 5px; left: 50%; transform: translateX(-50%);">12</div>
                    <div class="clock-number" style="top: 50%; right: 5px; transform: translateY(-50%);">3</div>
                    <div class="clock-number" style="bottom: 5px; left: 50%; transform: translateX(-50%);">6</div>
                    <div class="clock-number" style="top: 50%; left: 5px; transform: translateY(-50%);">9</div>
                    <div class="hand hour-hand" id="hourHand"></div>
                    <div class="hand minute-hand" id="minuteHand"></div>
                    <div class="hand second-hand" id="secondHand"></div>
                    <div class="clock-center"></div>
                </div>
            </div>
        </div>

        <!-- 进度条 -->
        <div class="time-display">
            <h3>时间进度条</h3>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill">0%</div>
                </div>
                <div class="progress-time" id="progressTime">00:00:00</div>
            </div>
        </div>

        <!-- 俄罗斯方块 -->
        <div class="time-display">
            <h3>时间方块</h3>
            <div class="tetris-container">
                <div class="tetris-info">
                    <span>已填充: <span id="filledCount">0</span>/180</span>
                    <span>剩余: <span id="remainingTime">24:00:00</span></span>
                </div>
                <div class="tetris-board" id="tetrisBoard"></div>
                <div class="tetris-time" id="tetrisTime">00:00:00</div>
            </div>
        </div>

        <!-- 时间沙漏（全新设计） -->
        <div class="time-display">
            <h3>时间沙漏</h3>
            <div class="hourglass-container">
                <div class="hourglass-info">
                    <span>上: <span id="topPct">100</span>%</span>
                    <span>下: <span id="bottomPct">0</span>%</span>
                </div>
                <div class="hourglass-wrapper">
                    <div class="hourglass-frame"></div>
                    <div class="hourglass-top">
                        <div class="sand-surface-top" id="sandTop"></div>
                    </div>
                    <div class="hourglass-bottom">
                        <div class="sand-surface-bottom" id="sandBottom"></div>
                    </div>
                    <div class="sand-stream" id="sandStream"></div>
                </div>
                <div class="hourglass-time" id="hourglassTime">00:00:00</div>
            </div>
        </div>

        <!-- 电池图标 -->
        <div class="time-display">
            <h3>时间电池</h3>
            <div class="battery-container">
                <div class="battery" id="battery">
                    <div class="battery-fill" id="batteryFill">0%</div>
                </div>
                <div class="battery-time" id="batteryTime">00:00:00</div>
            </div>
        </div>

        <!-- 水龙头 -->
        <div class="time-display">
            <h3>时间水滴</h3>
            <div class="faucet-container">
                <div class="faucet"></div>
                <div class="water-drop" id="waterDrop"></div>
                <div class="cup" id="cup">
                    <div class="water-level" id="waterLevel">00:00:00</div>
                </div>
                <div class="faucet-time" id="faucetTime">00:00:00</div>
            </div>
        </div>
    </div>

    <script>
        /* ---------- 全局变量 ---------- */
        let tetrisCells = [];
        let isNight = false;
        let hourglassFlipped = false;

        /* ---------- 初始化 ---------- */
        function init() {
            setupTetris();
            updateTime();
            setInterval(updateTime, 1000);
        }

        /* ---------- 俄罗斯方块面板 ---------- */
        function setupTetris() {
            const board = document.getElementById('tetrisBoard');
            if (!board) return;
            board.innerHTML = '';
            tetrisCells = [];
            for (let row = 0; row < 20; row++) {
                tetrisCells[row] = [];
                for (let col = 0; col < 10; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'tetris-cell';
                    cell.id = `cell-${row}-${col}`;
                    board.appendChild(cell);
                    tetrisCells[row][col] = cell;
                }
            }
        }

        /* ---------- 主时间更新 ---------- */
        function updateTime() {
            const now = new Date();
            const h = now.getHours(), m = now.getMinutes(), s = now.getSeconds();
            isNight = h < 6 || h >= 18;

            const beijingTime = document.getElementById('beijingTime');
            if (beijingTime) beijingTime.textContent = formatTime(h, m, s);
            updateDateInfo(now);
            updateClock(h, m, s);
            updateProgressBar(h, m, s);
            updateTetris(h, m, s);
            updateHourglass(h, m, s);
            updateBattery(h, m, s);
            updateFaucet(h, m, s);
        }

        /* ---------- 工具函数 ---------- */
        function formatTime(h, m, s) {
            return `${pad(h)}:${pad(m)}:${pad(s)}`;
        }
        function pad(n) {
            return n < 10 ? '0' + n : n;
        }
        function updateDateInfo(d) {
            const y = d.getFullYear(), M = d.getMonth() + 1, D = d.getDate();
            const week = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'][d.getDay()];
            const el = document.getElementById('dateInfo');
            if (el) el.textContent = `${y}年${M}月${D}日 ${week}`;
        }

        /* ---------- 时钟 ---------- */
        function updateClock(h, m, s) {
            const hDeg = (h % 12) * 30 + m * 0.5, mDeg = m * 6 + s * 0.1, sDeg = s * 6;
            const hh = document.getElementById('hourHand'), mh = document.getElementById('minuteHand'), sh = document.getElementById('secondHand');
            if (hh) hh.style.transform = `rotate(${hDeg}deg)`;
            if (mh) mh.style.transform = `rotate(${mDeg}deg)`;
            if (sh) sh.style.transform = `rotate(${sDeg}deg)`;
        }

        /* ---------- 进度条 ---------- */
        function updateProgressBar(h, m, s) {
            const total = h * 3600 + m * 60 + s;
            const prog = (total / 43200) * 100; // 12h 为 100%
            const show = prog <= 100 ? prog : 200 - prog;
            const fill = document.getElementById('progressFill'), time = document.getElementById('progressTime');
            if (fill) {
                fill.style.width = show + '%';
                fill.textContent = Math.round(show) + '%';
            }
            if (time) time.textContent = formatTime(h, m, s);
        }

        /* ---------- 俄罗斯方块 ---------- */
        function updateTetris(h, m, s) {
            const total = h * 3600 + m * 60 + s;
            const dayProg = total / 86400;
            const colsToFill = Math.floor(dayProg * 9);

            for (let row = 0; row < 20; row++) {
                for (let col = 0; col < 10; col++) {
                    tetrisCells[row][col].classList.remove('filled');
                }
            }
            let filled = 0;
            for (let col = 9; col > 0; col--) {
                const rem = 9 - col;
                if (rem < colsToFill) {
                    for (let r = 0; r < 20; r++) {
                        tetrisCells[r][col].classList.add('filled');
                        filled++;
                    }
                } else if (rem === colsToFill) {
                    const rows = Math.floor((dayProg * 9 - colsToFill) * 20);
                    for (let r = 19; r >= 20 - rows; r--) {
                        tetrisCells[r][col].classList.add('filled');
                        filled++;
                    }
                }
            }
            if (dayProg >= 0.999) {
                for (let r = 0; r < 20; r++) {
                    tetrisCells[r][0].classList.add('filled');
                    filled++;
                }
                setTimeout(() => setupTetris(), 2000);
            }
            const cnt = document.getElementById('filledCount'), remTime = document.getElementById('remainingTime'), tTime = document.getElementById('tetrisTime');
            const remSec = 86400 - total;
            const remH = Math.floor(remSec / 3600), remM = Math.floor((remSec % 3600) / 60), remS = remSec % 60;
            if (cnt) cnt.textContent = filled;
            if (remTime) remTime.textContent = `${pad(remH)}:${pad(remM)}:${pad(remS)}`;
            if (tTime) tTime.textContent = formatTime(h, m, s);
        }

        /* ---------- 时间沙漏（美观新版） ---------- */
        function updateHourglass(h, m, s) {
            const total = h * 3600 + m * 60 + s;
            const prog = total / 86400;
            const topPct = 100 - prog * 100;
            const bottomPct = prog * 100;

            const topEl = document.getElementById('sandTop');
            const bottomEl = document.getElementById('sandBottom');
            const stream = document.getElementById('sandStream');
            const timeEl = document.getElementById('hourglassTime');
            const topInfo = document.getElementById('topPct');
            const bottomInfo = document.getElementById('bottomPct');

            if (topEl) topEl.style.height = topPct + '%';
            if (bottomEl) bottomEl.style.height = bottomPct + '%';
            if (topInfo) topInfo.textContent = Math.round(topPct);
            if (bottomInfo) bottomInfo.textContent = Math.round(bottomPct);
            if (timeEl) timeEl.textContent = formatTime(h, m, s);

            /* 落沙流光 */
            if (prog > 0 && prog < 0.999) {
                stream.style.opacity = '1';
            } else {
                stream.style.opacity = '0';
            }

            /* 一天结束重置 */
            if (prog >= 0.999 && !hourglassFlipped) {
                hourglassFlipped = true;
                setTimeout(() => hourglassFlipped = false, 1000);
            }
        }

        /* ---------- 电池 ---------- */
        function updateBattery(h, m, s) {
            const total = h * 3600 + m * 60 + s;
            let pct = 0;
            if (isNight) {
                if (h >= 18) pct = ((h - 18) * 3600 + m * 60 + s) / 43200 * 100;
                else pct = (total) / 21600 * 100;
            } else {
                pct = 100 - ((h - 6) * 3600 + m * 60 + s) / 43200 * 100;
            }
            const bat = document.getElementById('battery');
            const fill = document.getElementById('batteryFill');
            const time = document.getElementById('batteryTime');
            if (fill) {
                fill.style.width = pct + '%';
                fill.textContent = Math.round(pct) + '%';
            }
            if (bat) bat.classList.toggle('charging', isNight);
            if (time) time.textContent = formatTime(h, m, s);
        }

        /* ---------- 水龙头 ---------- */
        function updateFaucet(h, m, s) {
            const total = h * 3600 + m * 60 + s;
            const prog = (total / 86400) * 100;
            const level = document.getElementById('waterLevel');
            const cup = document.getElementById('cup');
            const time = document.getElementById('faucetTime');
            if (prog >= 100) {
                if (cup && !cup.classList.contains('tipping')) {
                    cup.classList.add('tipping');
                    setTimeout(() => cup.classList.remove('tipping'), 1000);
                }
                if (level) level.style.height = '0%';
            } else {
                if (level) level.style.height = prog + '%';
            }
            if (level) level.textContent = formatTime(h, m, s);
            if (time) time.textContent = formatTime(h, m, s);
        }

        /* ---------- 启动 ---------- */
        init();
    </script>
</body>
</html>
