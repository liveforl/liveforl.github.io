<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¸»æ’­ç²‰ä¸æ¨¡æ‹Ÿå™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }
        
        .container {
            max-width: 100vw;
            min-height: 100vh;
            position: relative;
            padding-bottom: 80px;
        }
        
        /* ç™»å½•é¡µé¢ */
        .login-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%);
            padding: 20px;
        }
        
        .login-box {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(10px);
            padding: 40px 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 350px;
            border: 1px solid rgba(94, 234, 212, 0.2);
        }
        
        .login-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(135deg, #38bdf8 0%, #0ea5e9 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 8px;
            color: #94a3b8;
            font-size: 14px;
        }
        
        .input-field {
            width: 100%;
            padding: 15px;
            background: rgba(15, 23, 42, 0.5);
            border: 2px solid #334155;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
            color: #e2e8f0;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #38bdf8;
            box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.3);
        }
        
        .btn-primary {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-appearance: none;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(2, 132, 199, 0.4);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }
        
        .btn-primary::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255,255,255,0.1);
            transform: rotate(30deg);
            transition: all 0.6s;
        }
        
        .btn-primary:hover::after {
            transform: rotate(30deg) translate(20%, 20%);
        }
        
        /* åº•éƒ¨å¯¼èˆª */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
            z-index: 1000;
            border-top: 1px solid rgba(56, 189, 248, 0.2);
        }
        
        .nav-item {
            flex: 1;
            text-align: center;
            padding: 8px;
            cursor: pointer;
            transition: all 0.3s;
            color: #94a3b8;
            text-decoration: none;
            font-size: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .nav-item:hover {
            color: #38bdf8;
        }
        
        .nav-item.active {
            color: #38bdf8;
            position: relative;
        }
        
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            width: 30%;
            height: 3px;
            background: #38bdf8;
            border-radius: 3px;
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 2px;
        }
        
        /* ä¸»é¡µ */
        .profile-page {
            display: none;
            min-height: 100vh;
            padding-bottom: 80px;
        }
        
        .profile-header {
            background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%);
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .profile-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(56, 189, 248, 0.2) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(56, 189, 248, 0.2) 0%, transparent 40%);
            z-index: 0;
        }
        
        .profile-info {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        
        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(15, 23, 42, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: #38bdf8;
            margin-right: 20px;
            border: 3px solid rgba(56, 189, 248, 0.5);
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.3);
        }
        
        .profile-details {
            flex: 1;
        }
        
        .username {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #f8fafc;
        }
        
        .user-id {
            font-size: 14px;
            color: #cbd5e1;
        }
        
        .profile-stats {
            display: flex;
            justify-content: space-around;
            padding: 20px 0;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 15px;
            position: relative;
            z-index: 1;
            border: 1px solid rgba(56, 189, 248, 0.2);
        }
        
        .stat-item {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            padding: 5px 10px;
            border-radius: 8px;
        }
        
        .stat-item:hover {
            background: rgba(56, 189, 248, 0.1);
        }
        
        .stat-number {
            font-size: 20px;
            font-weight: bold;
            display: block;
            margin-bottom: 3px;
            color: #38bdf8;
        }
        
        .stat-label {
            font-size: 12px;
            color: #94a3b8;
        }
        
        .profile-bio {
            padding: 15px;
            font-size: 14px;
            line-height: 1.6;  color: #cbd5e1;  background: rgba(15, 23, 42, 0.5);  border-radius: 10px;  margin: 15px;  border: 1px solid rgba(56, 189, 248, 0.2);  }
            .profile-actions {
    display: flex;
    gap: 10px;
    padding: 0 20px;
    margin-bottom: 20px;
}

.btn-follow, .btn-message {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    -webkit-appearance: none;
}

.btn-follow {
    background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
    color: white;
}

.btn-follow:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(2, 132, 199, 0.4);
}

.btn-message {
    background: rgba(15, 23, 42, 0.7);
    color: #38bdf8;
    border: 1px solid #38bdf8;
}

.btn-message:hover {
    background: rgba(56, 189, 248, 0.1);
}

.btn-follow.following {
    background: rgba(15, 23, 42, 0.7);
    color: #94a3b8;
    border: 1px solid #334155;
}

/* ä½œå“é¡µé¢ */
.works-page {
    display: none;
    min-height: 100vh;
    padding-bottom: 80px;
    background: #0f172a;
}

.works-header {
    background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%);
    padding: 15px 20px;
    position: sticky;
    top: 0;
    z-index: 100;
    border-bottom: 1px solid rgba(56, 189, 248, 0.2);
}

.works-title {
    font-size: 18px;
    font-weight: bold;
    text-align: center;
    color: #f8fafc;
}

.works-list {
    padding: 20px;
}

.work-item {
    background: rgba(15, 23, 42, 0.7);
    border-radius: 12px;
    margin-bottom: 20px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    border: 1px solid rgba(56, 189, 248, 0.2);
    transition: all 0.3s;
}

.work-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    border-color: rgba(56, 189, 248, 0.4);
}

.work-content {
    padding: 20px;
    font-size: 15px;
    line-height: 1.7;
    color: #e2e8f0;
}

.work-actions {
    display: flex;
    justify-content: space-around;
    padding: 15px;
    border-top: 1px solid rgba(56, 189, 248, 0.1);
    background: rgba(15, 23, 42, 0.5);
}

.work-action {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    cursor: pointer;
    padding: 8px 12px;
    border-radius: 8px;
    transition: all 0.3s;
    color: #94a3b8;
}

.work-action:hover {
    background: rgba(56, 189, 248, 0.1);
    color: #38bdf8;
}

.work-action.liked {
    color: #f87171;
}

.work-action.collected {
    color: #fbbf24;
}

.work-action-icon {
    font-size: 20px;
}

.work-action-text {
    font-size: 12px;
}

/* ç§ä¿¡é¡µé¢ */
.message-page {
    display: none;
    min-height: 100vh;
    padding-bottom: 80px;
    background: #0f172a;
}

.message-header {
    background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%);
    padding: 15px 20px;
    position: sticky;
    top: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    gap: 15px;
    border-bottom: 1px solid rgba(56, 189, 248, 0.2);
}

.back-btn {
    font-size: 24px;
    cursor: pointer;
    color: #38bdf8;
    transition: all 0.3s;
}

.back-btn:hover {
    transform: translateX(-3px);
}

.message-title {
    font-size: 18px;
    font-weight: bold;
    color: #f8fafc;
}

.message-list {
    padding: 20px;
    min-height: calc(100vh - 140px);
}

.message-item {
    margin-bottom: 15px;
    display: flex;
    align-items: flex-end;
    gap: 10px;
    animation: fadeIn 0.3s;
}

.message-item.user {
    justify-content: flex-end;
}

.message-bubble {
    max-width: 70%;
    padding: 12px 16px;
    border-radius: 18px;
    font-size: 14px;
    line-height: 1.5;
    word-wrap: break-word;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.message-item.host .message-bubble {
    background: rgba(30, 41, 59, 0.7);
    color: #e2e8f0;
    border-bottom-left-radius: 4px;
    border: 1px solid rgba(56, 189, 248, 0.2);
}

.message-item.user .message-bubble {
    background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
    color: white;
    border-bottom-right-radius: 4px;
}

.message-input-container {
    position: fixed;
    bottom: 80px;
    left: 0;
    right: 0;
    background: rgba(15, 23, 42, 0.9);
    backdrop-filter: blur(10px);
    padding: 15px;
    display: flex;
    gap: 10px;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
    border-top: 1px solid rgba(56, 189, 248, 0.2);
}

.message-input {
    flex: 1;
    padding: 12px 16px;
    background: rgba(30, 41, 59, 0.7);
    border: 1px solid #334155;
    border-radius: 25px;
    font-size: 14px;
    color: #e2e8f0;
}

.message-input:focus {
    outline: none;
    border-color: #38bdf8;
    box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.3);
}

.send-btn {
    padding: 12px 20px;
    background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
    color: white;
    border: none;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    -webkit-appearance: none;
}

.send-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(2, 132, 199, 0.4);
}

.send-btn:active {
    transform: translateY(0);
}

/* æˆå°±é¡µé¢ */
.achievement-page {
    display: none;
    min-height: 100vh;
    padding-bottom: 80px;
    background: #0f172a;
}

.achievement-header {
    background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%);
        padding: 15px 20px;
    position: sticky;
    top: 0;
    z-index: 100;
    border-bottom: 1px solid rgba(56, 189, 248, 0.2);
}

.achievement-title {
    font-size: 18px;
    font-weight: bold;
    text-align: center;
    color: #f8fafc;
}

.achievement-list {
    padding: 20px;
}

.achievement-item {
    background: rgba(15, 23, 42, 0.7);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    border: 1px solid rgba(56, 189, 248, 0.2);
    transition: all 0.3s;
}

.achievement-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

.achievement-item.unlocked {
    background: linear-gradient(135deg, rgba(14, 165, 233, 0.2) 0%, rgba(2, 132, 199, 0.2) 100%);
    border: 1px solid rgba(56, 189, 248, 0.4);
}

.achievement-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(30, 41, 59, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: #38bdf8;
    border: 1px solid rgba(56, 189, 248, 0.3);
}

.achievement-item.unlocked .achievement-icon {
    background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
    color: white;
    box-shadow: 0 0 15px rgba(56, 189, 248, 0.5);
}

.achievement-info {
    flex: 1;
}

.achievement-name {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 5px;
    color: #f8fafc;
}

.achievement-item.unlocked .achievement-name {
    color: #38bdf8;
}

.achievement-desc {
    font-size: 13px;
    color: #94a3b8;
}

/* å°å·é¡µé¢ */
.ban-page {
    display: none;
    min-height: 100vh;
    background: #0f172a;
    text-align: center;
    padding: 40px 20px;
}

.ban-icon {
    font-size: 80px;
    color: #f87171;
    margin-bottom: 20px;
    text-shadow: 0 0 20px rgba(248, 113, 113, 0.5);
}

.ban-title {
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 10px;
    color: #f87171;
}

.ban-reason {
    font-size: 16px;
    color: #94a3b8;
    margin-bottom: 30px;
}

.ban-countdown {
    font-size: 18px;
    color: #fbbf24;
    font-weight: 600;
    margin-bottom: 30px;
}

.ban-appeal {
    background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
    color: white;
    padding: 12px 30px;
    border: none;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    -webkit-appearance: none;
}

.ban-appeal:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(2, 132, 199, 0.4);
}

/* è¯„è®ºæ¨¡æ€æ¡† */
.comment-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.7);
    z-index: 2000;
    backdrop-filter: blur(5px);
}

.comment-container {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(to top, #0f172a 0%, #1e293b 100%);
    border-radius: 20px 20px 0 0;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    border-top: 1px solid rgba(56, 189, 248, 0.3);
    box-shadow: 0 -10px 30px rgba(0,0,0,0.4);
}

.comment-header {
    padding: 20px;
    font-size: 18px;
    font-weight: bold;
    text-align: center;
    border-bottom: 1px solid rgba(56, 189, 248, 0.1);
    color: #f8fafc;
}

.comment-close {
    position: absolute;
    right: 20px;
    top: 20px;
    font-size: 24px;
    cursor: pointer;
    color: #94a3b8;
    transition: all 0.3s;
}

.comment-close:hover {
    color: #38bdf8;
    transform: rotate(90deg);
}

.comment-list {
    flex: 1;
    overflow-y: auto;
    padding: 0 20px;
    max-height: 50vh;
}

.comment-item {
    padding: 15px 0;
    border-bottom: 1px solid rgba(56, 189, 248, 0.1);
    animation: fadeIn 0.3s;
}

.comment-user {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 5px;
    color: #38bdf8;
}

.comment-content {
    font-size: 14px;
    line-height: 1.5;
    color: #e2e8f0;
}

.comment-time {
    font-size: 12px;
    color: #94a3b8;
    margin-top: 5px;
}

.comment-input-container {
    padding: 15px 20px;
    border-top: 1px solid rgba(56, 189, 248, 0.1);
    display: flex;
    gap: 10px;
    background: rgba(15, 23, 42, 0.7);
}

.comment-input {
    flex: 1;
    padding: 10px 15px;
    background: rgba(30, 41, 59, 0.7);
    border: 1px solid #334155;
    border-radius: 20px;
    font-size: 14px;
    color: #e2e8f0;
}

.comment-input:focus {
    outline: none;
    border-color: #38bdf8;
    box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.3);
}

.comment-submit {
    padding: 10px 20px;
    background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
    color: white;
    border: none;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    -webkit-appearance: none;
}

.comment-submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(2, 132, 199, 0.4);
}

.comment-submit:active {
    transform: translateY(0);
}

/* ä¸‹ä¸€å¤©æŒ‰é’® */
.next-day-btn {
    position: fixed;
    bottom: 100px;
    right: 20px;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
    color: white;
    border: none;
    border-radius: 50%;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 5px 20px rgba(2,132, 199, 0.5);  transition: all 0.3s;  z-index: 500;  display: flex;  align-items: center;  justify-content: center;  flex-direction: column;  gap: 2px;  -webkit-appearance: none;  }
        .next-day-btn:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 8px 25px rgba(2, 132, 199, 0.6);
    }
    
    .next-day-btn:active {
        transform: translateY(-1px) scale(1.02);
    }
    
    .next-day-icon {
        font-size: 20px;
    }
    
    .next-day-text {
        font-size: 10px;
    }
    
    /* é‡æ–°å¼€å§‹æŒ‰é’® */
    #restartBtn {
        bottom: 100px;
        right: 90px;
        background: linear-gradient(135deg, #6b7280 0%, #ef4444 100%);
    }
    
    /* äº‹ä»¶é€šçŸ¥å®¹å™¨ */
    #noticeContainer {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        width: 90%;
        max-width: 400px;
        display: flex;
        flex-direction: column;
        gap: 8px;
        z-index: 3000;
        pointer-events: none;
    }
    
    .event-notification {
        background: rgba(15, 23, 42, 0.9);
        backdrop-filter: blur(10px);
        color: white;
        padding: 15px 25px;
        border-radius: 25px;
        font-size: 14px;
        animation: slideDown 0.3s;
        max-width: 100%;
        text-align: center;
        border: 1px solid rgba(56, 189, 248, 0.3);
        box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    }
    
    .event-notification.success {
        background: linear-gradient(135deg, rgba(14, 165, 233, 0.9) 0%, rgba(2, 132, 199, 0.9) 100%);
    }
    
    .event-notification.warning {
        background: linear-gradient(135deg, rgba(251, 191, 36, 0.9) 0%, rgba(245, 158, 11, 0.9) 100%);
    }
    
    .event-notification.error {
        background: linear-gradient(135deg, rgba(248, 113, 113, 0.9) 0%, rgba(239, 68, 68, 0.9) 100%);
    }
    
    /* åŠ¨ç”» */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translate(-50%, -20px);
        }
        to {
            opacity: 1;
            transform: translate(-50%, 0);
        }
    }
    
    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 375px) {
        .login-box {
            padding: 30px 20px;
        }
        
        .profile-stats {
            padding: 15px 0;
        }
        
        .stat-number {
            font-size: 18px;
        }
        
        .work-content {
            font-size: 14px;
        }
        
        .message-bubble {
            max-width: 75%;
        }
    }
    
    /* åŠ è½½åŠ¨ç”» */
    .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    /* æ»šåŠ¨æ¡æ ·å¼ */
    ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }
    
    ::-webkit-scrollbar-track {
        background: rgba(15, 23, 42, 0.3);
    }
    
    ::-webkit-scrollbar-thumb {
        background: #38bdf8;
        border-radius: 3px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
        background: #0ea5e9;
    }
    
    /* é€‰æ‹©æ–‡æœ¬æ ·å¼ */
    ::selection {
        background: rgba(56, 189, 248, 0.3);
        color: #f8fafc;
    }
    
    /* ç¦ç”¨çŠ¶æ€ */
    .disabled {
        opacity: 0.5;
        pointer-events: none;
    }
    
    /* é—ªçƒæ•ˆæœ */
    .blink {
        animation: blink 1s infinite;
    }
    
    @keyframes blink {
        0%, 50% { opacity: 1; }
        51%, 100% { opacity: 0.3; }
    }
    
    /* æ•°å­—å˜åŒ–åŠ¨ç”» */
    .number-change {
        animation: numberChange 0.5s;
    }
    
    @keyframes numberChange {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
    }
</style>
</head>
<body>
    <div class="container">
        <!-- ç™»å½•é¡µé¢ -->
        <div class="login-page" id="loginPage">
            <div class="login-box">
                <h1 class="login-title">ä¸»æ’­ç²‰ä¸æ¨¡æ‹Ÿå™¨</h1>
                <div class="input-group">
                    <label class="input-label">è¾“å…¥ä½ çš„æ˜µç§°</label>
                    <input type="text" class="input-field" id="nicknameInput" placeholder="è¯·è¾“å…¥æ˜µç§°" maxlength="10">
                </div>
                <button class="btn-primary" id="startBtn">ç¡®å®š</button>
            </div>
        </div>
        <!-- ä¸»æ’­ä¸»é¡µ -->
<div class="profile-page" id="profilePage">
    <div class="profile-header">
        <div class="profile-info">
            <div class="avatar" id="hostAvatar">ä¸»</div>
            <div class="profile-details">
                <div class="username" id="hostName">ä¸»æ’­æ˜µç§°</div>
                <div class="user-id" id="hostId">ID: 123456</div>
            </div>
        </div>
        <div class="profile-stats">
            <div class="stat-item" onclick="showWorks()">
                <span class="stat-number" id="worksCount">0</span>
                <span class="stat-label">ä½œå“</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="likesCount">0</span>
                <span class="stat-label">è·èµ</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="followingCount">0</span>
                <span class="stat-label">å…³æ³¨</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="followersCount">0</span>
                <span class="stat-label">ç²‰ä¸</span>
            </div>
        </div>
    </div>
    <div class="profile-bio" id="hostBio">ä¸»æ’­ç®€ä»‹</div>
    <div class="profile-actions">
        <button class="btn-follow following" id="followBtn">å·²å…³æ³¨</button>
        <button class="btn-message" onclick="showMessages()">ç§ä¿¡</button>
    </div>
</div>

<!-- ä½œå“é¡µé¢ -->
<div class="works-page" id="worksPage">
    <div class="works-header">
        <div class="back-btn" onclick="showProfile()">â€¹</div>
        <div class="works-title">ä½œå“</div>
    </div>
    <div class="works-list" id="worksList"></div>
</div>

<!-- ç§ä¿¡é¡µé¢ -->
<div class="message-page" id="messagePage">
    <div class="message-header">
        <div class="back-btn" onclick="showProfile()">â€¹</div>
        <div class="message-title" id="messageTitle">ä¸»æ’­æ˜µç§°</div>
    </div>
    <div class="message-list" id="messageList"></div>
    <div class="message-input-container">
        <input type="text" class="message-input" id="messageInput" placeholder="è¾“å…¥æ¶ˆæ¯..." maxlength="100">
        <button class="send-btn" onclick="sendMessage()">å‘é€</button>
    </div>
</div>

<!-- æˆå°±é¡µé¢ -->
<div class="achievement-page" id="achievementPage">
    <div class="achievement-header">
        <div class="achievement-title">æˆå°±</div>
    </div>
    <div class="achievement-list" id="achievementList"></div>
</div>

<!-- å°å·é¡µé¢ -->
<div class="ban-page" id="banPage">  ğŸš«  è´¦å·è¢«å°ç¦  è¿åç¤¾åŒºè§„å®š    ç”³è¯‰  
    <!-- è¯„è®ºæ¨¡æ€æ¡† -->
    <div class="comment-modal" id="commentModal">
        <div class="comment-container">
            <div class="comment-header">
                è¯„è®ºåŒº
                <div class="comment-close" onclick="closeComments()">Ã—</div>
            </div>
            <div class="comment-list" id="commentList"></div>
            <div class="comment-input-container">
                <input type="text" class="comment-input" id="commentInput" placeholder="å‘è¡¨è¯„è®º..." maxlength="100">
                <button class="comment-submit" onclick="postComment()">å‘é€</button>
            </div>
        </div>
    </div>
    
    <!-- åº•éƒ¨å¯¼èˆª -->
    <div class="bottom-nav" id="bottomNav" style="display: none;">
        <a href="#" class="nav-item active" onclick="showProfile()">
            <div class="nav-icon">ğŸ </div>
            <div>ä¸»é¡µ</div>
        </a>
        <a href="#" class="nav-item" onclick="showWorks()">
            <div class="nav-icon">ğŸ¬</div>
            <div>ä½œå“</div>
        </a>
        <a href="#" class="nav-item" onclick="showMessages()">
            <div class="nav-icon">ğŸ’¬</div>
            <div>ç§ä¿¡</div>
        </a>
        <a href="#" class="nav-item" onclick="showAchievements()">
            <div class="nav-icon">ğŸ†</div>
            <div>æˆå°±</div>
        </a>
    </div>
    
    <!-- ä¸‹ä¸€å¤©æŒ‰é’® -->
    <button class="next-day-btn" id="nextDayBtn" onclick="nextDay()" style="display: none;">
        <div class="next-day-icon">â­</div>
        <div class="next-day-text">ä¸‹ä¸€å¤©</div>
    </button>
    
    <!-- é‡æ–°å¼€å§‹æŒ‰é’® -->
    <button class="next-day-btn" id="restartBtn" style="display: none;">
        <div class="next-day-icon">ğŸ”„</div>
        <div class="next-day-text">é‡å¼€</div>
    </button>
</div>

<script>
    // æ¸¸æˆæ•°æ®
    let gameData = {
        nickname: '',
        day: 1,
        host: {
            name: '',
            id: '',
            avatar: '',
            bio: '',
            works: 0,
            likes: 0,
            following: 0,
            followers: 0,
            isBanned: false,
            banDays: 0,
            banType: 0,
            collapseLevel: 0, // å¡Œæˆ¿ç­‰çº§ 0-3
            lastUpdateDay: 0,
            replyRate: 0.3,
            postRate: 0.5,
            deleteRate: 0.1
        },
        user: {
            following: true,
            messages: [],
            achievements: [],
            totalLikes: 0,
            totalComments: 0,
            totalMessages: 0
        },
        works: [],
        comments: {},
        events: []
    };
    
    // éšæœºæ•°æ®ç”Ÿæˆ
    const hostNames = ['å°ç¾', 'é˜¿å¼º', 'å©·å©·', 'å¤§ä¼Ÿ', 'ä¸½ä¸½', 'å°æ˜', 'å°çº¢', 'å°åˆš', 'èŠ±èŠ±', 'ä¸œä¸œ'];
    const hostBios = [
        'åˆ†äº«ç”Ÿæ´»ç‚¹æ»´ï¼Œè®°å½•ç¾å¥½ç¬é—´',
        'åŠªåŠ›æˆä¸ºæ›´å¥½çš„è‡ªå·±',
        'æ„Ÿè°¢æ¯ä¸€ä¸ªå…³æ³¨æˆ‘çš„äºº',
        'ç›´æ’­æ—¶é—´æ¯æ™š8ç‚¹',
        'æ–°äººä¸»æ’­ï¼Œè¯·å¤šå…³ç…§',
        'å–œæ¬¢å”±æ­Œè·³èˆ',
        'ç¾é£Ÿçˆ±å¥½è€…',
        'æ—…è¡Œè¾¾äºº',
        'æ¸¸æˆä¸»æ’­ï¼Œä¸€èµ·å¼€é»‘',
        'æ—¥å¸¸åˆ†äº«ï¼Œæ¬¢è¿å…³æ³¨'
    ];
    const workContents = [
        'ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œå¿ƒæƒ…ä¹Ÿè·Ÿç€å¥½èµ·æ¥äº†ï¼',
        'æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼Œæˆ‘ä¼šç»§ç»­åŠªåŠ›çš„ï¼',
        'åˆšåˆšå°è¯•äº†æ–°å‘å‹ï¼Œå¤§å®¶è§‰å¾—æ€ä¹ˆæ ·ï¼Ÿ',
        'ä»Šå¤©å­¦ä¼šäº†æ–°èˆè¹ˆï¼Œåˆ†äº«ç»™å¤§å®¶',
        'æ¨èä¸€å®¶è¶…å¥½åƒçš„é¤å…',
        'ä»Šå¤©çš„å¦†å®¹æ•™ç¨‹æ¥äº†',
        'åˆ†äº«æˆ‘çš„å¥èº«æ—¥å¸¸',
        'æ–°ä¹°çš„è¡£æœï¼Œå¤§å®¶è§‰å¾—å¥½çœ‹å—ï¼Ÿ',
        'ä»Šå¤©å»äº†ä¸€ä¸ªå¾ˆç¾çš„åœ°æ–¹',
        'ç»™å¤§å®¶å”±ä¸€é¦–æ–°æ­Œ'
    ];
    const randomComments = [
        'ä¸»æ’­å¥½æ£’ï¼',
        'æ”¯æŒæ”¯æŒï¼',
        'æ¥äº†æ¥äº†',
        'ä¸»æ’­ä»Šå¤©å¥½ç¾',
        'åŠ æ²¹åŠ æ²¹',
        'å·²ç‚¹èµ',
        'å‰æ’æ”¯æŒ',
        'ä¸»æ’­äººçœŸå¥½',
        'å…³æ³¨äº†',
        'ä¸»æ’­å”±å¾—çœŸå¥½å¬'
    ];
    
    // æˆå°±åˆ—è¡¨
    const achievementsList = [
        { id: 'first_day', name: 'æ–°çš„ä¸€å¤©', desc: 'å¼€å§‹æ¸¸æˆ', icon: 'ğŸŒ…' },
        { id: 'first_like', name: 'åˆæ¬¡ç‚¹èµ', desc: 'ç¬¬ä¸€æ¬¡ç‚¹èµä½œå“', icon: 'ğŸ‘' },
        { id: 'first_comment', name: 'åˆæ¬¡è¯„è®º', desc: 'ç¬¬ä¸€æ¬¡å‘è¡¨è¯„è®º', icon: 'ğŸ’¬' },
        { id: 'first_message', name: 'åˆæ¬¡ç§ä¿¡', desc: 'ç¬¬ä¸€æ¬¡å‘é€ç§ä¿¡', icon: 'ğŸ“§' },
        { id: 'fan_100', name: 'å°æœ‰åæ°”', desc: 'ä¸»æ’­ç²‰ä¸è¾¾åˆ°100', icon: 'â­' },
        { id: 'fan_1000', name: 'ç½‘çº¢ä¸»æ’­', desc: 'ä¸»æ’­ç²‰ä¸è¾¾åˆ°1000', icon: 'ğŸŒŸ' },
        { id: 'fan_10000', name: 'è¶…çº§ç½‘çº¢', desc: 'ä¸»æ’­ç²‰ä¸è¾¾åˆ°10000', icon: 'âœ¨' },
        { id: 'work_10', name: 'å¤šäº§ä¸»æ’­', desc: 'ä¸»æ’­å‘å¸ƒ10ä¸ªä½œå“', icon: 'ğŸ¬' },
        { id: 'collapse_1', name: 'é£é›¨æ¬²æ¥', desc: 'ç»å†ä¸€æ¬¡å¡Œæˆ¿', icon: 'âš¡' },
        { id: 'ban_1', name: 'åˆæ¬¡å°ç¦', desc: 'ç»å†ä¸€æ¬¡å°ç¦', icon: 'ğŸš«' },
        { id: 'day_7', name: 'ä¸€å‘¨ç²‰ä¸', desc: 'è¿ç»­å…³æ³¨7å¤©', icon: 'ğŸ—“ï¸' },
        { id: 'day_30', name: 'å¿ å®ç²‰ä¸', desc: 'è¿ç»­å…³æ³¨30å¤©', icon: 'ğŸ“…' },
        { id: 'lucky_reply', name: 'å¹¸è¿å„¿', desc: 'è·å¾—ä¸»æ’­å›å¤', icon: 'ğŸ€' },
        { id: 'all_works', name: 'å…¨ä½œå“ç‚¹èµ', desc: 'ç‚¹èµæ‰€æœ‰ä½œå“', icon: 'â¤ï¸' },
        { id: 'active_fan', name: 'æ´»è·ƒç²‰ä¸', desc: 'å•æ—¥ç‚¹èµ10æ¬¡', icon: 'ğŸ”¥' }
    ];
    
    // åˆå§‹åŒ–æ¸¸æˆ
    function initGame() {
        // å°è¯•åŠ è½½å­˜æ¡£
        const savedData = localStorage.getItem('streamerFanSimulator');
        if (savedData) {
            gameData = JSON.parse(savedData);
            if (gameData.nickname) {
                showProfile();
                return;
            }
        }
        
        // ç”Ÿæˆéšæœºä¸»æ’­æ•°æ®
        generateHostData();
    }
    
    // ç”Ÿæˆä¸»æ’­æ•°æ®
    function generateHostData() {
        const name = hostNames[Math.floor(Math.random() * hostNames.length)];
        gameData.host.name = name;
        gameData.host.id = 'ID: ' + Math.floor(100000 + Math.random() * 900000);
        gameData.host.avatar = name[0];
        gameData.host.bio = hostBios[Math.floor(Math.random() * hostBios.length)];
        gameData.host.works = Math.floor(Math.random() * 50) + 10;
        gameData.host.likes = Math.floor(Math.random() * 10000) + 1000;
        gameData.host.following = Math.floor(Math.random() * 100) + 10;
        gameData.host.followers = Math.floor(Math.random() * 1000) + 100;
    }
    
    // å¼€å§‹æ¸¸æˆ
    document.getElementById('startBtn').addEventListener('click', function() {
        const nickname = document.getElementById('nicknameInput').value.trim();
        if (!nickname) {
            showNotification('è¯·è¾“å…¥æ˜µç§°', 'warning');
            return;
        }
        
        gameData.nickname = nickname;
        saveGame();
        showProfile();
        unlockAchievement('first_day');
    });
    
    // æ˜¾ç¤ºä¸»é¡µ
    function showProfile() {
        hideAllPages();
        document.getElementById('profilePage').style.display = 'block';
        document.getElementById('bottomNav').style.display = 'flex';
        document.getElementById('nextDayBtn').style.display = 'flex';
        document.getElementById('restartBtn').style.display = 'flex';
        
        updateNavActive(0);
        updateProfile();
        
        // æ£€æŸ¥å°å·çŠ¶æ€
        if (gameData.host.isBanned) {
            showBanPage();
        }
    }
    
    // æ˜¾ç¤ºä½œå“é¡µé¢
    function showWorks() {
        hideAllPages();
        document.getElementById('worksPage').style.display = 'block';
        document.getElementById('bottomNav').style.display = 'flex';
        document.getElementById('nextDayBtn').style.display = 'flex';  document.getElementById('restartBtn').style.display = 'flex';
            updateNavActive(1);
    updateWorksList();
}

// æ˜¾ç¤ºç§ä¿¡é¡µé¢
function showMessages() {
    hideAllPages();
    document.getElementById('messagePage').style.display = 'block';
    document.getElementById('bottomNav').style.display = 'flex';
    document.getElementById('nextDayBtn').style.display = 'flex';
    document.getElementById('restartBtn').style.display = 'flex';
    
    updateNavActive(2);
    updateMessageList();
}

// æ˜¾ç¤ºæˆå°±é¡µé¢
function showAchievements() {
    hideAllPages();
    document.getElementById('achievementPage').style.display = 'block';
    document.getElementById('bottomNav').style.display = 'flex';
    document.getElementById('nextDayBtn').style.display = 'flex';
    document.getElementById('restartBtn').style.display = 'flex';
    
    updateNavActive(3);
    updateAchievementList();
}

// éšè—æ‰€æœ‰é¡µé¢
function hideAllPages() {
    document.getElementById('loginPage').style.display = 'none';
    document.getElementById('profilePage').style.display = 'none';
    document.getElementById('worksPage').style.display = 'none';
    document.getElementById('messagePage').style.display = 'none';
    document.getElementById('achievementPage').style.display = 'none';
    document.getElementById('banPage').style.display = 'none';
    document.getElementById('commentModal').style.display = 'none';
}

// æ›´æ–°å¯¼èˆªæ¿€æ´»çŠ¶æ€
function updateNavActive(index) {
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach((item, i) => {
        if (i === index) {
            item.classList.add('active');
        } else {
            item.classList.remove('active');
        }
    });
}

// æ›´æ–°ä¸»é¡µæ•°æ®
function updateProfile() {
    document.getElementById('hostAvatar').textContent = gameData.host.avatar;
    document.getElementById('hostName').textContent = gameData.host.name;
    document.getElementById('hostId').textContent = gameData.host.id;
    document.getElementById('hostBio').textContent = gameData.host.bio;
    
    animateNumber('worksCount', gameData.host.works);
    animateNumber('likesCount', gameData.host.likes);
    animateNumber('followingCount', gameData.host.following);
    animateNumber('followersCount', gameData.host.followers);
    
    // æ›´æ–°å…³æ³¨æŒ‰é’®
    const followBtn = document.getElementById('followBtn');
    if (gameData.user.following) {
        followBtn.textContent = 'å·²å…³æ³¨';
        followBtn.classList.add('following');
    } else {
        followBtn.textContent = 'å…³æ³¨';
        followBtn.classList.remove('following');
    }
    
    // å…³æ³¨æŒ‰é’®äº‹ä»¶
    followBtn.onclick = function() {
        if (gameData.host.isBanned) {
            showNotification('ä¸»æ’­è¢«å°ç¦ä¸­ï¼Œæ— æ³•æ“ä½œ', 'warning');
            return;
        }
        
        gameData.user.following = !gameData.user.following;
        if (gameData.user.following) {
            gameData.host.followers++;
            showNotification('å…³æ³¨æˆåŠŸ', 'success');
        } else {
            gameData.host.followers--;
            showNotification('å·²å–æ¶ˆå…³æ³¨', 'warning');
        }
        updateProfile();
        saveGame();
    };
}

// æ•°å­—åŠ¨ç”»
function animateNumber(elementId, targetValue) {
    const element = document.getElementById(elementId);
    const currentValue = parseInt(element.textContent) || 0;
    const increment = (targetValue - currentValue) / 20;
    let step = 0;
    
    const timer = setInterval(() => {
        step++;
        const newValue = Math.floor(currentValue + increment * step);
        element.textContent = formatNumber(newValue);
        
        if (step >= 20) {
            element.textContent = formatNumber(targetValue);
            element.classList.add('number-change');
            setTimeout(() => element.classList.remove('number-change'), 500);
            clearInterval(timer);
        }
    }, 25);
}

// æ ¼å¼åŒ–æ•°å­—
function formatNumber(num) {
    if (num >= 10000) {
        return (num / 10000).toFixed(1) + 'w';
    } else if (num >= 1000) {
        return (num / 1000).toFixed(1) + 'k';
    }
    return num.toString();
}

// æ›´æ–°ä½œå“åˆ—è¡¨
function updateWorksList() {
    const worksList = document.getElementById('worksList');
    worksList.innerHTML = '';
    
    // ç”Ÿæˆä½œå“
    for (let i = 0; i < gameData.host.works; i++) {
        if (!gameData.works[i]) {
            gameData.works[i] = {
                id: i,
                content: workContents[Math.floor(Math.random() * workContents.length)],
                likes: Math.floor(Math.random() * 1000) + 100,
                comments: Math.floor(Math.random() * 100) + 10,
                collections: Math.floor(Math.random() * 200) + 20,
                shares: Math.floor(Math.random() * 50) + 5,
                isLiked: false,
                isCollected: false,
                commentsList: []
            };
        }
        
        const work = gameData.works[i];
        const workItem = document.createElement('div');
        workItem.className = 'work-item';
        workItem.innerHTML = `
            <div class="work-content">${work.content}</div>
            <div class="work-actions">
                <div class="work-action ${work.isLiked ? 'liked' : ''}" onclick="toggleLike(${i})">
                    <div class="work-action-icon">${work.isLiked ? 'â¤ï¸' : 'ğŸ¤'}</div>
                    <div class="work-action-text">${formatNumber(work.likes)}</div>
                </div>
                <div class="work-action" onclick="showComments(${i})">
                    <div class="work-action-icon">ğŸ’¬</div>
                    <div class="work-action-text">${formatNumber(work.comments)}</div>
                </div>
                <div class="work-action ${work.isCollected ? 'collected' : ''}" onclick="toggleCollect(${i})">
                    <div class="work-action-icon">${work.isCollected ? 'â­' : 'â˜†'}</div>
                    <div class="work-action-text">${formatNumber(work.collections)}</div>
                </div>
                <div class="work-action" onclick="shareWork(${i})">
                    <div class="work-action-icon">â†—ï¸</div>
                    <div class="work-action-text">${formatNumber(work.shares)}</div>
                </div>
            </div>
        `;
        worksList.appendChild(workItem);
    }
    
    saveGame();
}

// ç‚¹èµåŠŸèƒ½
function toggleLike(workIndex) {
    const work = gameData.works[workIndex];
    if (work.isLiked) {
        work.likes--;
        work.isLiked = false;
        gameData.user.totalLikes--;
        showNotification('å·²å–æ¶ˆç‚¹èµ', 'warning');
    } else {
        work.likes++;
        work.isLiked = true;
        gameData.user.totalLikes++;
        showNotification('ç‚¹èµæˆåŠŸ', 'success');
        unlockAchievement('first_like');
        
        // æ£€æŸ¥æ˜¯å¦ç‚¹èµäº†æ‰€æœ‰ä½œå“
        const allLiked = gameData.works.every(w => w.isLiked);
        if (allLiked) unlockAchievement('all_works');
        
        // æ£€æŸ¥å•æ—¥ç‚¹èµæ•°
        if (gameData.user.totalLikes >= 10) unlockAchievement('active_fan');
    }
    
    updateWorksList();
    saveGame();
}

// æ”¶è—åŠŸèƒ½
function toggleCollect(workIndex) {
    const work = gameData.works[workIndex];
    if (work.isCollected) {
        work.collections--;
        work.isCollected = false;
        showNotification('å·²å–æ¶ˆæ”¶è—', 'warning');
    } else {
        work.collections++;
        work.isCollected = true;
        showNotification('æ”¶è—æˆåŠŸ', 'success');
    }
    
    updateWorksList();
    saveGame();
}

// åˆ†äº«åŠŸèƒ½
function shareWork(workIndex) {
    const work = gameData.works[workIndex];
    work.shares++;
    showNotification('åˆ†äº«æˆåŠŸ', 'success');
    updateWorksList();
    saveGame();
}

// æ˜¾ç¤ºè¯„è®º
function showComments(workIndex) {
    const modal = document.getElementById('commentModal');
    modal.style.display = 'block';
    modal.dataset.workIndex = workIndex;
    
    const commentList = document.getElementById('commentList');
    commentList.innerHTML = '';
    
    const work = gameData.works[workIndex];
    
    // ç”Ÿæˆè¯„è®º
    if (!work.commentsList || work.commentsList.length === 0) {
        for (let i = 0; i < work.comments; i++) {
            work.commentsList.push({
                user: 'ç”¨æˆ·' + Math.floor(100000 + Math.random() * 900000),  content: randomComments[Math.floor(Math.random() * randomComments.length)],  time: Math.floor(Math.random() * 24) + 'å°æ—¶å‰'  });  }  }
                    // æ˜¾ç¤ºè¯„è®º
    work.commentsList.forEach(comment => {
        const commentItem = document.createElement('div');
        commentItem.className = 'comment-item';
        commentItem.innerHTML = `
            <div class="comment-user">${comment.user}</div>
            <div class="comment-content">${comment.content}</div>
            <div class="comment-time">${comment.time}</div>
        `;
        commentList.appendChild(commentItem);
    });
    
    saveGame();
}

// å…³é—­è¯„è®º
function closeComments() {
    document.getElementById('commentModal').style.display = 'none';
}

// å‘è¡¨è¯„è®º
function postComment() {
    const input = document.getElementById('commentInput');
    const content = input.value.trim();
    if (!content) {
        showNotification('è¯·è¾“å…¥è¯„è®ºå†…å®¹', 'warning');
        return;
    }
    
    const workIndex = document.getElementById('commentModal').dataset.workIndex;
    const work = gameData.works[workIndex];
    
    work.commentsList.unshift({
        user: gameData.nickname,
        content: content,
        time: 'åˆšåˆš'
    });
    
    work.comments++;
    input.value = '';
    showNotification('è¯„è®ºå‘è¡¨æˆåŠŸ', 'success');
    unlockAchievement('first_comment');
    
    // ä¸»æ’­æ¦‚ç‡å›å¤
    if (Math.random() < gameData.host.replyRate) {
        setTimeout(() => {
            work.commentsList.unshift({
                user: gameData.host.name,
                content: 'è°¢è°¢ä½ çš„æ”¯æŒï¼',
                time: 'åˆšåˆš'
            });
            work.comments++;
            showComments(workIndex);
            showNotification('ä¸»æ’­å›å¤äº†ä½ çš„è¯„è®ºï¼', 'success');
            unlockAchievement('lucky_reply');
        }, 2000);
    }
    
    showComments(workIndex);
    updateWorksList();
    saveGame();
}

// æ›´æ–°ç§ä¿¡åˆ—è¡¨
function updateMessageList() {
    const messageList = document.getElementById('messageList');
    messageList.innerHTML = '';
    
    gameData.user.messages.forEach((msg, index) => {
        const messageItem = document.createElement('div');
        messageItem.className = `message-item ${msg.isUser ? 'user' : 'host'}`;
        messageItem.innerHTML = `
            <div class="message-bubble">${msg.content}</div>
        `;
        messageList.appendChild(messageItem);
    });
    
    // æ»šåŠ¨åˆ°åº•éƒ¨
    messageList.scrollTop = messageList.scrollHeight;
}

// å‘é€ç§ä¿¡
function sendMessage() {
    const input = document.getElementById('messageInput');
    const content = input.value.trim();
    if (!content) {
        showNotification('è¯·è¾“å…¥æ¶ˆæ¯å†…å®¹', 'warning');
        return;
    }
    
    if (gameData.host.isBanned) {
        showNotification('ä¸»æ’­è¢«å°ç¦ä¸­ï¼Œæ— æ³•å‘é€ç§ä¿¡', 'warning');
        return;
    }
    
    // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
    gameData.user.messages.push({
        content: content,
        isUser: true,
        time: Date.now()
    });
    
    gameData.user.totalMessages++;
    input.value = '';
    unlockAchievement('first_message');
    
    // ä¸»æ’­æ¦‚ç‡å›å¤
    if (Math.random() < gameData.host.replyRate) {
        setTimeout(() => {
            const replies = [
                'è°¢è°¢ä½ çš„æ”¯æŒï¼',
                'æˆ‘ä¼šç»§ç»­åŠªåŠ›çš„ï¼',
                'ä»Šå¤©ç›´æ’­è§å“¦',
                'ä½ çš„å»ºè®®æˆ‘æ”¶åˆ°äº†',
                'ä¸€èµ·åŠ æ²¹ï¼',
                'æ„Ÿè°¢é™ªä¼´',
                'æœ‰æ–°ä½œå“è®°å¾—çœ‹å“¦',
                'ä»Šå¤©å¿ƒæƒ…å¾ˆå¥½'
            ];
            
            const reply = replies[Math.floor(Math.random() * replies.length)];
            gameData.user.messages.push({
                content: reply,
                isUser: false,
                time: Date.now()
            });
            
            updateMessageList();
            showNotification('ä¸»æ’­å›å¤äº†ä½ çš„ç§ä¿¡ï¼', 'success');
            unlockAchievement('lucky_reply');
        }, 1000 + Math.random() * 3000);
    }
    
    updateMessageList();
    saveGame();
}

// æ›´æ–°æˆå°±åˆ—è¡¨
function updateAchievementList() {
    const achievementList = document.getElementById('achievementList');
    achievementList.innerHTML = '';
    
    achievementsList.forEach(achievement => {
        const achievementItem = document.createElement('div');
        achievementItem.className = `achievement-item ${gameData.user.achievements.includes(achievement.id) ? 'unlocked' : ''}`;
        achievementItem.innerHTML = `
            <div class="achievement-icon">${achievement.icon}</div>
            <div class="achievement-info">
                <div class="achievement-name">${achievement.name}</div>
                <div class="achievement-desc">${achievement.desc}</div>
            </div>
        `;
        achievementList.appendChild(achievementItem);
    });
}

// è§£é”æˆå°±
function unlockAchievement(achievementId) {
    if (!gameData.user.achievements.includes(achievementId)) {
        gameData.user.achievements.push(achievementId);
        const achievement = achievementsList.find(a => a.id === achievementId);
        if (achievement) {
            showNotification(`ğŸ† è§£é”æˆå°±ï¼š${achievement.name}`, 'success');
        }
        saveGame();
    }
}

// æ˜¾ç¤ºå°å·é¡µé¢
function showBanPage() {
    hideAllPages();
    document.getElementById('banPage').style.display = 'block';
    document.getElementById('bottomNav').style.display = 'none';
    document.getElementById('nextDayBtn').style.display = 'none';
    document.getElementById('restartBtn').style.display = 'none';
    
    const banReasons = ['è¿åç¤¾åŒºè§„å®š', 'å‘å¸ƒä¸å½“å†…å®¹', 'æ¶‰å«Œè¿è§„æ“ä½œ', 'ç”¨æˆ·ä¸¾æŠ¥å±å®'];
    document.getElementById('banReason').textContent = banReasons[Math.floor(Math.random() * banReasons.length)];
    
    if (gameData.host.banDays > 0 && gameData.host.banDays < 999) {
        document.getElementById('banCountdown').textContent = `è·ç¦»è§£å°è¿˜æœ‰ ${gameData.host.banDays} å¤©`;
    } else if (gameData.host.banDays === 999) {
        document.getElementById('banCountdown').textContent = 'æ°¸ä¹…å°ç¦';
    }
    
    // æ ¹æ®å°å·ç±»å‹æ˜¾ç¤ºä¸åŒå†…å®¹
    const hostAvatar = document.getElementById('hostAvatar');
    const hostName = document.getElementById('hostName');
    const profileInfo = document.querySelector('.profile-info');
    const profileStats = document.querySelector('.profile-stats');
    const worksList = document.getElementById('worksList');
    
    switch (gameData.host.banType) {
        case 1: // å¤´åƒå˜ç™½ï¼Œåå­—å’ŒIDä¸€æ ·ï¼Œæ˜¾ç¤ºå°ç¦ï¼Œä¸æ˜¾ç¤ºä½œå“
            hostAvatar.style.background = 'linear-gradient(135deg, #64748b 0%, #475569 100%)';
            hostAvatar.style.color = '#cbd5e1';
            hostName.textContent = 'å·²å°ç¦';
            profileInfo.style.opacity = '0.5';
            profileStats.style.display = 'none';
            break;
        case 2: // å¤´åƒã€åå­—ã€IDã€ä½œå“ä¸å˜ï¼Œæ˜¾ç¤ºå°ç¦
            // æ­£å¸¸æ˜¾ç¤ºï¼Œä½†æ·»åŠ å°ç¦æ ‡è¯†
            const banBadge = document.createElement('div');
            banBadge.textContent = 'å°ç¦ä¸­';
            banBadge.style.cssText = `
                position: absolute;
                top: 10px;
                right: 10px;
                background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
                color: white;
                padding: 5px 15px;
                border-radius: 20px;
                font-size: 12px;
                font-weight: bold;
                box-shadow: 0 2px 10px rgba(220, 38, 38, 0.3);
                z-index: 10;
            `;
            document.querySelector('.profile-header').appendChild(banBadge);
            break;
        case 3: // å¤´åƒã€åå­—ã€IDä¸å˜ï¼Œä½œå“ä¸æ˜¾ç¤ºï¼Œæ˜¾ç¤ºå°ç¦
            // æ·»åŠ å°ç¦æ ‡è¯†
            const banBadge3 = document.createElement('div');
            banBadge3.textContent = 'å°ç¦ä¸­';
            banBadge3.style.cssText = `
                position: absolute;
                top: 10px;
                right: 10px;
                background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
                color: white;
                padding: 5px 15px;
                border-radius: 20px;
                font-size: 12px;
                font-weight: bold;
                box-shadow: 0 2px 10px rgba(220, 38, 38, 0.3);
                z-index: 10;
            `;
            document.querySelector('.profile-header').appendChild(banBadge3);
            break;
    }
}

// ç”³è¯‰å°å·
function appealBan() {
    if (Math.random() < 0.3) {
        gameData.host.isBanned = false;
        gameData.host.banDays = 0;
        gameData.host.banType = 0;
        showNotification('ç”³è¯‰æˆåŠŸï¼Œè´¦å·å·²è§£å°ï¼', 'success');
        showProfile();
        saveGame();
    } else {
        showNotification('ç”³è¯‰å¤±è´¥ï¼Œè¯·ç¨åå†è¯•', 'warning');  }  }
            // ä¸‹ä¸€å¤©
    function nextDay() {
        gameData.day++;
        
        // éšæœºäº‹ä»¶
        triggerRandomEvent();
        
        // ä¸»æ’­è¡Œä¸º
        hostBehavior();
        
        // æ£€æŸ¥å°å·
        if (gameData.host.isBanned && gameData.host.banDays > 0) {
            gameData.host.banDays--;
            if (gameData.host.banDays === 0) {
                gameData.host.isBanned = false;
                gameData.host.banType = 0;
                showNotification('ä¸»æ’­è´¦å·å·²è§£å°', 'success');
            }
        }
        
        // æ£€æŸ¥æˆå°±
        checkAchievements();
        
        saveGame();
        showNotification(`ç¬¬ ${gameData.day} å¤©`, 'success');
        
        // æ›´æ–°é¡µé¢
        if (document.getElementById('profilePage').style.display === 'block') {
            updateProfile();
        } else if (document.getElementById('worksPage').style.display === 'block') {
            updateWorksList();
        }
    }
    
    // è§¦å‘éšæœºäº‹ä»¶
    function triggerRandomEvent() {
        const events = [];
        
        // æ ¹æ®å¡Œæˆ¿ç­‰çº§è°ƒæ•´äº‹ä»¶æ¦‚ç‡
        const collapseModifier = gameData.host.collapseLevel * 0.2;
        
        // æ¶¨ç²‰äº‹ä»¶
        if (Math.random() < 0.3 - collapseModifier) {
            const gain = Math.floor(Math.random() * 100) + 10;
            gameData.host.followers += gain;
            events.push(`ä¸»æ’­å‘å¸ƒäº†ä¼˜è´¨å†…å®¹ï¼Œæ¶¨ç²‰ ${gain} äºº`);
        }
        
        // æ‰ç²‰äº‹ä»¶
        if (Math.random() < 0.2 + collapseModifier) {
            const loss = Math.floor(Math.random() * 50) + 5;
            gameData.host.followers = Math.max(0, gameData.host.followers - loss);
            events.push(`ä¸»æ’­çƒ­åº¦ä¸‹é™ï¼Œæ‰ç²‰ ${loss} äºº`);
        }
        
        // å¡Œæˆ¿äº‹ä»¶
        if (gameData.host.collapseLevel === 0 && Math.random() < 0.05) {
            gameData.host.collapseLevel = 1;
            events.push('ä¸»æ’­ç–‘ä¼¼å¡Œæˆ¿ï¼Œç²‰ä¸è®®è®ºçº·çº·');
            unlockAchievement('collapse_1');
        }
        
        // å°ç¦äº‹ä»¶
        if (!gameData.host.isBanned && Math.random() < 0.03) {
            const banTypes = [1, 3, 15, 30, 999];
            const banDays = banTypes[Math.floor(Math.random() * banTypes.length)];
            gameData.host.isBanned = true;
            gameData.host.banDays = banDays;
            gameData.host.banType = Math.floor(Math.random() * 3) + 1;
            events.push(`ä¸»æ’­å› è¿è§„è¢«å°ç¦ ${banDays === 999 ? 'æ°¸ä¹…' : banDays + 'å¤©'}`);
            unlockAchievement('ban_1');
        }
        
        // æ˜¾ç¤ºäº‹ä»¶é€šçŸ¥
        if (events.length > 0) {
            const randomEvent = events[Math.floor(Math.random() * events.length)];
            showNotification(randomEvent, 'warning');
        }
    }
    
    // ä¸»æ’­è¡Œä¸º
    function hostBehavior() {
        if (gameData.host.isBanned) return;
        
        // å‘å¸ƒä½œå“
        if (gameData.host.collapseLevel < 2 && Math.random() < gameData.host.postRate) {
            gameData.host.works++;
            showNotification('ä¸»æ’­å‘å¸ƒäº†æ–°ä½œå“', 'success');
            
            // æ›´æ–°ä½œå“åˆ—è¡¨
            const newWork = {
                id: gameData.works.length,
                content: workContents[Math.floor(Math.random() * workContents.length)],
                likes: Math.floor(Math.random() * 500) + 50,
                comments: Math.floor(Math.random() * 50) + 5,
                collections: Math.floor(Math.random() * 100) + 10,
                shares: Math.floor(Math.random() * 30) + 3,
                isLiked: false,
                isCollected: false,
                commentsList: []
            };
            gameData.works.unshift(newWork);
        }
        
        // å¡Œæˆ¿ååˆ é™¤ä½œå“
        if (gameData.host.collapseLevel >= 2 && Math.random() < gameData.host.deleteRate) {
            if (gameData.works.length > 0) {
                gameData.works.shift();
                gameData.host.works = Math.max(0, gameData.host.works - 1);
                showNotification('ä¸»æ’­åˆ é™¤äº†ä¸€ä¸ªä½œå“', 'warning');
            }
        }
        
        // é•¿æœŸä¸æ›´æ–°æ‰ç²‰
        if (gameData.day - gameData.host.lastUpdateDay > 3) {
            const loss = Math.floor(Math.random() * 20) + 5;
            gameData.host.followers = Math.max(0, gameData.host.followers - loss);
            gameData.host.lastUpdateDay = gameData.day;
        }
    }
    
    // æ£€æŸ¥æˆå°±
    function checkAchievements() {
        // ç²‰ä¸æ•°æˆå°±
        if (gameData.host.followers >= 100) unlockAchievement('fan_100');
        if (gameData.host.followers >= 1000) unlockAchievement('fan_1000');
        if (gameData.host.followers >= 10000) unlockAchievement('fan_10000');
        
        // ä½œå“æ•°æˆå°±
        if (gameData.host.works >= 10) unlockAchievement('work_10');
        
        // å¤©æ•°æˆå°±
        if (gameData.day >= 7) unlockAchievement('day_7');
        if (gameData.day >= 30) unlockAchievement('day_30');
    }
    
    // äº‹ä»¶é€šçŸ¥é˜Ÿåˆ—
    const noticeQueue = [];
    const noticeContainer = document.createElement('div');
    noticeContainer.id = 'noticeContainer';
    document.body.appendChild(noticeContainer);
    
    // æ˜¾ç¤ºé€šçŸ¥ï¼ˆé€è¡Œæ˜¾ç¤ºï¼Œä¸é‡å ï¼‰
    function showNotification(message, type = 'info') {
        if (noticeContainer.children.length >= 5) {
            noticeContainer.firstElementChild.remove();
        }
        
        const item = document.createElement('div');
        item.className = `event-notification ${type}`;
        item.textContent = message;
        noticeContainer.appendChild(item);
        
        setTimeout(() => item.remove(), 3000);
    }
    
    // ä¿å­˜æ¸¸æˆ
    function saveGame() {
        localStorage.setItem('streamerFanSimulator', JSON.stringify(gameData));
    }
    
    // é‡æ–°å¼€å§‹
    document.getElementById('restartBtn').addEventListener('click', function() {
        if (confirm('ç¡®å®šè¦é‡æ–°å¼€å§‹å—ï¼Ÿå½“å‰è¿›åº¦ä¼šå…¨éƒ¨æ¸…ç©ºï¼')) {
            localStorage.removeItem('streamerFanSimulator');
            location.reload();
        }
    });
    
    // ç›‘å¬å›è½¦é”®
    document.getElementById('nicknameInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            document.getElementById('startBtn').click();
        }
    });
    
    document.getElementById('messageInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });
    
    document.getElementById('commentInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            postComment();
        }
    });
    
    // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
    document.getElementById('commentModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeComments();
        }
    });
    
    // é˜²æ­¢åŒå‡»ç¼©æ”¾
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function(e) {
        const now = Date.now();
        if (now - lastTouchEnd <= 300) {
            e.preventDefault();
        }
        lastTouchEnd = now;
    }, false);
    
    // åˆå§‹åŒ–
    initGame();
</script>
</body>
</html>
```
                
        
