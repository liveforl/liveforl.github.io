<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>主播粉丝模拟器</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }
        
        .container {
            max-width: 100vw;
            min-height: 100vh;
            position: relative;
            padding-bottom: 80px;
        }
        
        /* 登录页面 */
        .login-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%);
            padding: 20px;
        }
        
        .login-box {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(10px);
            padding: 40px 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 350px;
            border: 1px solid rgba(94, 234, 212, 0.2);
        }
        
        .login-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(135deg, #38bdf8 0%, #0ea5e9 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 8px;
            color: #94a3b8;
            font-size: 14px;
        }
        
        .input-field {
            width: 100%;
            padding: 15px;
            background: rgba(15, 23, 42, 0.5);
            border: 2px solid #334155;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
            color: #e2e8f0;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #38bdf8;
            box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.3);
        }
        
        .btn-primary {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-appearance: none;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(2, 132, 199, 0.4);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }
        
        .btn-primary::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255,255,255,0.1);
            transform: rotate(30deg);
            transition: all 0.6s;
        }
        
        .btn-primary:hover::after {
            transform: rotate(30deg) translate(20%, 20%);
        }
        
        /* 底部导航 */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
            z-index: 1000;
            border-top: 1px solid rgba(56, 189, 248, 0.2);
        }
        
        .nav-item {
            flex: 1;
            text-align: center;
            padding: 8px;
            cursor: pointer;
            transition: all 0.3s;
            color: #94a3b8;
            text-decoration: none;
            font-size: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .nav-item:hover {
            color: #38bdf8;
        }
        
        .nav-item.active {
            color: #38bdf8;
            position: relative;
        }
        
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            width: 30%;
            height: 3px;
            background: #38bdf8;
            border-radius: 3px;
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 2px;
        }
        
        /* 主页 */
        .profile-page {
            display: none;
            min-height: 100vh;
            padding-bottom: 80px;
        }
        
        .profile-header {
            background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%);
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .profile-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(56, 189, 248, 0.2) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(56, 189, 248, 0.2) 0%, transparent 40%);
            z-index: 0;
        }
        
        .profile-info {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        
        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(15, 23, 42, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: #38bdf8;
            margin-right: 20px;
            border: 3px solid rgba(56, 189, 248, 0.5);
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.3);
        }
        
        .profile-details {
            flex: 1;
        }
        
        .username {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #f8fafc;
        }
        
        .user-id {
            font-size: 14px;
            color: #cbd5e1;
        }
        
        .profile-stats {
            display: flex;
            justify-content: space-around;
            padding: 20px 0;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 15px;
            position: relative;
            z-index: 1;
            border: 1px solid rgba(56, 189, 248, 0.2);
        }
        
        .stat-item {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            padding: 5px 10px;
            border-radius: 8px;
        }
        
        .stat-item:hover {
            background: rgba(56, 189, 248, 0.1);
        }
        
        .stat-number {
            font-size: 20px;
            font-weight: bold;
            display: block;
            margin-bottom: 3px;
            color: #38bdf8;
        }
        
        .stat-label {
            font-size: 12px;
            color: #94a3b8;
        }
        
        .profile-bio {
            padding: 15px;
            font-size: 14px;
            line-height: 1.6;
            color: #cbd5e1;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 10px;
            margin: 15px;
            border: 1px solid rgba(56, 189, 248, 0.2);
        }
        
        .profile-actions {
            display: flex;
            gap: 10px;
            padding: 0 20px;
            margin-bottom: 20px;
        }
        
        .btn-follow, .btn-message {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-appearance: none;
        }
        
        .btn-follow {
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
        }
        
        .btn-follow:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(2, 132, 199, 0.4);
        }
        
        .btn-message {
            background: rgba(15, 23, 42, 0.7);
            color: #38bdf8;
            border: 1px solid #38bdf8;
        }
        
        .btn-message:hover {
            background: rgba(56, 189, 248, 0.1);
        }
        
        .btn-follow.following {
            background: rgba(15, 23, 42, 0.7);
            color: #94a3b8;
            border: 1px solid #334155;
        }
        
        /* 作品页面 */
        .works-page {
            display: none;
            min-height: 100vh;
            padding-bottom: 80px;
            background: #0f172a;
        }
        
        .works-header {
            background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(56, 189, 248, 0.2);
        }
        
        .works-title {
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            color: #f8fafc;
        }
        
        .works-list {
            padding: 20px;
        }
        
        .work-item {
            background: rgba(15, 23, 42, 0.7);
            border-radius: 12px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(56, 189, 248, 0.2);
            transition: all 0.3s;
        }
        
        .work-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            border-color: rgba(56, 189, 248, 0.4);
        }
        
        .work-content {
            padding: 20px;
            font-size: 15px;
            line-height: 1.7;
            color: #e2e8f0;
        }
        
        .work-actions {
            display: flex;
            justify-content: space-around;
            padding: 15px;
            border-top: 1px solid rgba(56, 189, 248, 0.1);
            background: rgba(15, 23, 42, 0.5);
        }
        
        .work-action {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.3s;
            color: #94a3b8;
        }
        
        .work-action:hover {
            background: rgba(56, 189, 248, 0.1);
            color: #38bdf8;
        }
        
        .work-action.liked {
            color: #f87171;
        }
        
        .work-action.collected {
            color: #fbbf24;
        }
        
        .work-action-icon {
            font-size: 20px;
        }
        
        .work-action-text {
            font-size: 12px;
        }
        
        /* 私信页面 */
        .message-page {
            display: none;
            min-height: 100vh;
            padding-bottom: 80px;
            background: #0f172a;
        }
        
        .message-header {
            background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 1px solid rgba(56, 189, 248, 0.2);
        }
        
        .back-btn {
            font-size: 24px;
            cursor: pointer;
            color: #38bdf8;
            transition: all 0.3s;
        }
        
        .back-btn:hover {
            transform: translateX(-3px);
        }
        
        .message-title {
            font-size: 18px;
            font-weight: bold;
            color: #f8fafc;
        }
        
        .message-list {
            padding: 20px;
            min-height: calc(100vh - 140px);
        }
        
        .message-item {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-end;
            gap: 10px;
            animation: fadeIn 0.3s;
        }
        
        .message-item.user {
            justify-content: flex-end;
        }
        
        .message-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.5;
            word-wrap: break-word;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .message-item.host .message-bubble {
            background: rgba(30, 41, 59, 0.7);
            color: #e2e8f0;
            border-bottom-left-radius: 4px;
            border: 1px solid rgba(56, 189, 248, 0.2);
        }
        
        .message-item.user .message-bubble {
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
            border-bottom-right-radius: 4px;
        }
        
        .message-input-container {
            position: fixed;
            bottom: 80px;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px;
            display: flex;
            gap: 10px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
            border-top: 1px solid rgba(56, 189, 248, 0.2);
        }
        
        .message-input {
            flex: 1;
            padding: 12px 16px;
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid #334155;
            border-radius: 25px;
            font-size: 14px;
            color: #e2e8f0;
        }
        
        .message-input:focus {
            outline: none;
            border-color: #38bdf8;
            box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.3);
        }
        
        .send-btn {
            padding: 12px 20px;
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-appearance: none;
        }
        
        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(2, 132, 199, 0.4);
        }
        
        .send-btn:active {
            transform: translateY(0);
        }
        
        /* 成就页面 */
        .achievement-page {
            display: none;
            min-height: 100vh;
            padding-bottom: 80px;
            background: #0f172a;
        }
        
        .achievement-header {
            background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(56, 189, 248, 0.2);
        }
        
        .achievement-title {
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            color: #f8fafc;
        }
        
        .achievement-list {
            padding: 20px;
        }
        
        .achievement-item {
            background: rgba(15, 23, 42, 0.7);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(56, 189, 248, 0.2);
            transition: all 0.3s;
        }
        
        .achievement-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .achievement-item.unlocked {
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.2) 0%, rgba(2, 132, 199, 0.2) 100%);
            border: 1px solid rgba(56, 189, 248, 0.4);
        }
        
        .achievement-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(30, 41, 59, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #38bdf8;
            border: 1px solid rgba(56, 189, 248, 0.3);
        }
        
        .achievement-item.unlocked .achievement-icon {
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.5);
        }
        
        .achievement-info {
            flex: 1;
        }
        
        .achievement-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
            color: #f8fafc;
        }
        
        .achievement-item.unlocked .achievement-name {
            color: #38bdf8;
        }
        
        .achievement-desc {
            font-size: 13px;
            color: #94a3b8;
        }
        
        /* 封号页面 */
        .ban-page {
            display: none;
            min-height: 100vh;
            background: #0f172a;
            text-align: center;
            padding: 40px 20px;
        }
        
        .ban-icon {
            font-size: 80px;
            color: #f87171;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(248, 113, 113, 0.5);
        }
        
        .ban-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #f87171;
        }
        
        .ban-reason {
            font-size: 16px;
            color: #94a3b8;
            margin-bottom: 30px;
        }
        
        .ban-countdown {
            font-size: 18px;
            color: #fbbf24;
            font-weight: 600;
            margin-bottom: 30px;
        }
        
        .ban-appeal {
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-appearance: none;
        }
        
        .ban-appeal:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(2, 132, 199, 0.4);
        }
        
        /* 评论模态框 */
        .comment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }
        
        .comment-container {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, #0f172a 0%, #1e293b 100%);
            border-radius: 20px 20px 0 0;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            border-top: 1px solid rgba(56, 189, 248, 0.3);
            box-shadow: 0 -10px 30px rgba(0,0,0,0.4);
        }
        
        .comment-header {
            padding: 20px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            border-bottom: 1px solid rgba(56, 189, 248, 0.1);
            color: #f8fafc;
        }
        
        .comment-close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #94a3b8;
            transition: all 0.3s;
        }
        
        .comment-close:hover {
            color: #38bdf8;
            transform: rotate(90deg);
        }
        
        .comment-list {
            flex: 1;
            overflow-y: auto;
            padding: 0 20px;
            max-height: 50vh;
        }
        
        .comment-item {
            padding: 15px 0;
            border-bottom: 1px solid rgba(56, 189, 248, 0.1);
            animation: fadeIn 0.3s;
        }
        
        .comment-user {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 5px;
            color: #38bdf8;
        }
        
        .comment-content {
            font-size: 14px;
            line-height: 1.5;
            color: #e2e8f0;
        }
        
        .comment-time {
            font-size: 12px;
            color: #94a3b8;
            margin-top: 5px;
        }
        
        .comment-input-container {
            padding: 15px 20px;
            border-top: 1px solid rgba(56, 189, 248, 0.1);
            display: flex;
            gap: 10px;
            background: rgba(15, 23, 42, 0.7);
        }
        
        .comment-input {
            flex: 1;
            padding: 10px 15px;
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid #334155;
            border-radius: 20px;
            font-size: 14px;
            color: #e2e8f0;
        }
        
        .comment-input:focus {
            outline: none;
            border-color: #38bdf8;
            box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.3);
        }
        
        .comment-submit {
            padding: 10px 20px;
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-appearance: none;
        }
        
        .comment-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(2, 132, 199, 0.4);
        }
        
        .comment-submit:active {
            transform: translateY(0);
        }
        
        /* 下一天按钮 */
        .next-day-btn {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(2, 132, 199, 0.5);
            transition: all 0.3s;
            z-index: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 2px;
            -webkit-appearance: none;
        }
        
        .next-day-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(2, 132, 199, 0.6);
        }
        
        .next-day-btn:active {
            transform: translateY(-1px) scale(1.02);
        }
        
        .next-day-icon {
            font-size: 20px;
        }
        
        .next-day-text {
            font-size: 10px;
        }
        
        /* 事件通知 */
        .event-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 14px;
            z-index: 3000;
            animation: slideDown 0.3s;
            max-width: 90%;
            text-align: center;
            border: 1px solid rgba(56, 189, 248, 0.3);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }
        
        .event-notification.success {
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.9) 0%, rgba(2, 132, 199, 0.9) 100%);
        }
        
        .event-notification.warning {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.9) 0%, rgba(245, 158, 11, 0.9) 100%);
        }
        
        .event-notification.error {
            background: linear-gradient(135deg, rgba(248, 113, 113, 0.9) 0%, rgba(239, 68, 68, 0.9) 100%);
        }
        
        /* 动画 */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translate(-50%, -20px);
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }
        
        /* 响应式设计 */
        @media (max-width: 375px) {
            .login-box {
                padding: 30px 20px;
            }
            
            .profile-stats {
                padding: 15px 0;
            }
            
            .stat-number {
                font-size: 18px;
            }
            
            .work-content {
                font-size: 14px;
            }
            
            .message-bubble {
                max-width: 75%;
            }
        }
        
        /* 加载动画 */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.3);
        }
        
        ::-webkit-scrollbar-thumb {
            background: #38bdf8;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #0ea5e9;
        }
        
        /* 选择文本样式 */
        ::selection {
            background: rgba(56, 189, 248, 0.3);
            color: #f8fafc;
        }
        
        /* 禁用状态 */
        .disabled {
            opacity: 0.5;
            pointer-events: none;
        }
        
        /* 闪烁效果 */
        .blink {
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        /* 数字变化动画 */
        .number-change {
            animation: numberChange 0.5s;
        }
        
        @keyframes numberChange {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 登录页面 -->
        <div class="login-page" id="loginPage">
            <div class="login-box">
                <h1 class="login-title">主播粉丝模拟器</h1>
                <div class="input-group">
                    <label class="input-label">输入你的昵称</label>
                    <input type="text" class="input-field" id="nicknameInput" placeholder="请输入昵称" maxlength="10">
                </div>
                <button class="btn-primary" id="startBtn">确定</button>
            </div>
        </div>
        
        <!-- 主播主页 -->
        <div class="profile-page" id="profilePage">
            <div class="profile-header">
                <div class="profile-info">
                    <div class="avatar" id="hostAvatar">主</div>
                    <div class="profile-details">
                        <div class="username" id="hostName">主播昵称</div>
                        <div class="user-id" id="hostId">ID: 123456</div>
                    </div>
                </div>
                <div class="profile-stats">
                    <div class="stat-item" onclick="showWorks()">
                        <span class="stat-number" id="worksCount">0</span>
                        <span class="stat-label">作品</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="likesCount">0</span>
                        <span class="stat-label">获赞</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="followingCount">0</span>
                        <span class="stat-label">关注</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="followersCount">0</span>
                        <span class="stat-label">粉丝</span>
                    </div>
                </div>
            </div>
            <div class="profile-bio" id="hostBio">主播简介</div>
            <div class="profile-actions">
                <button class="btn-follow following" id="followBtn">已关注</button>
                <button class="btn-message" onclick="showMessages()">私信</button>
            </div>
        </div>
        
        <!-- 作品页面 -->
        <div class="works-page" id="worksPage">
            <div class="works-header">
                <div class="back-btn" onclick="showProfile()">‹</div>
                <div class="works-title">作品</div>
            </div>
            <div class="works-list" id="worksList"></div>
        </div>
        
        <!-- 私信页面 -->
        <div class="message-page" id="messagePage">
            <div class="message-header">
                <div class="back-btn" onclick="showProfile()">‹</div>
                <div class="message-title" id="messageTitle">主播昵称</div>
            </div>
            <div class="message-list" id="messageList"></div>
            <div class="message-input-container">
                <input type="text" class="message-input" id="messageInput" placeholder="输入消息..." maxlength="100">
                <button class="send-btn" onclick="sendMessage()">发送</button>
            </div>
        </div>
        
        <!-- 成就页面 -->
        <div class="achievement-page" id="achievementPage">
            <div class="achievement-header">
                <div class="achievement-title">成就</div>
            </div>
            <div class="achievement-list" id="achievementList"></div>
        </div>
        
        <!-- 封号页面 -->
        <div class="ban-page" id="banPage">
            <div class="ban-icon">🚫</div>
            <div class="ban-title">账号被封禁</div>
            <div class="ban-reason" id="banReason">违反社区规定</div>
            <div class="ban-countdown" id="banCountdown"></div>
            <button class="ban-appeal" onclick="appealBan()">申诉</button>
        </div>
        
        <!-- 评论模态框 -->
        <div class="comment-modal" id="commentModal">
            <div class="comment-container">
                <div class="comment-header">
                    评论区
                    <div class="comment-close" onclick="closeComments()">×</div>
                </div>
                <div class="comment-list" id="commentList"></div>
                <div class="comment-input-container">
                    <input type="text" class="comment-input" id="commentInput" placeholder="发表评论..." maxlength="100">
                    <button class="comment-submit" onclick="postComment()">发送</button>
                </div>
            </div>
        </div>
        
        <!-- 底部导航 -->
        <div class="bottom-nav" id="bottomNav" style="display: none;">
            <a href="#" class="nav-item active" onclick="showProfile()">
                <div class="nav-icon">🏠</div>
                <div>主页</div>
            </a>
            <a href="#" class="nav-item" onclick="showWorks()">
                <div class="nav-icon">🎬</div>
                <div>作品</div>
            </a>
            <a href="#" class="nav-item" onclick="showMessages()">
                <div class="nav-icon">💬</div>
                <div>私信</div>
            </a>
            <a href="#" class="nav-item" onclick="showAchievements()">
                <div class="nav-icon">🏆</div>
                <div>成就</div>
            </a>
        </div>
        
        <!-- 下一天按钮 -->
        <button class="next-day-btn" id="nextDayBtn" onclick="nextDay()" style="display: none;">
            <div class="next-day-icon">⏭</div>
            <div class="next-day-text">下一天</div>
        </button>
    </div>
    
    <script>
        // 游戏数据
        let gameData = {
            nickname: '',
            day: 1,
            host: {
                name: '',
                id: '',
                avatar: '',
                bio: '',
                works: 0,
                likes: 0,
                following: 0,
                followers: 0,
                isBanned: false,
                banDays: 0,
                banType: 0,
                collapseLevel: 0, // 塌房等级 0-3
                lastUpdateDay: 0,
                replyRate: 0.3,
                postRate: 0.5,
                deleteRate: 0.1
            },
            user: {
                following: true,
                messages: [],
                achievements: [],
                totalLikes: 0,
                totalComments: 0,
                totalMessages: 0
            },
            works: [],
            comments: {},
            events: []
        };
        
        // 随机数据生成
        const hostNames = ['小美', '阿强', '婷婷', '大伟', '丽丽', '小明', '小红', '小刚', '花花', '东东'];
        const hostBios = [
            '分享生活点滴，记录美好瞬间',
            '努力成为更好的自己',
            '感谢每一个关注我的人',
            '直播时间每晚8点',
            '新人主播，请多关照',
            '喜欢唱歌跳舞',
            '美食爱好者',
            '旅行达人',
            '游戏主播，一起开黑',
            '日常分享，欢迎关注'
        ];
        const workContents = [
            '今天天气真好，心情也跟着好起来了！',
            '感谢大家的支持，我会继续努力的！',
            '刚刚尝试了新发型，大家觉得怎么样？',
            '今天学会了新舞蹈，分享给大家',
            '推荐一家超好吃的餐厅',
            '今天的妆容教程来了',
            '分享我的健身日常',
            '新买的衣服，大家觉得好看吗？',
            '今天去了一个很美的地方',
            '给大家唱一首新歌'
        ];
        const randomComments = [
            '主播好棒！',
            '支持支持！',
            '来了来了',
            '主播今天好美',
            '加油加油',
            '已点赞',
            '前排支持',
            '主播人真好',
            '关注了',
            '主播唱得真好听'
        ];
        
        // 成就列表
        const achievementsList = [
            { id: 'first_day', name: '新的一天', desc: '开始游戏', icon: '🌅' },
            { id: 'first_like', name: '初次点赞', desc: '第一次点赞作品', icon: '👍' },
            { id: 'first_comment', name: '初次评论', desc: '第一次发表评论', icon: '💬' },
            { id: 'first_message', name: '初次私信', desc: '第一次发送私信', icon: '📧' },
            { id: 'fan_100', name: '小有名气', desc: '主播粉丝达到100', icon: '⭐' },
            { id: 'fan_1000', name: '网红主播', desc: '主播粉丝达到1000', icon: '🌟' },
            { id: 'fan_10000', name: '超级网红', desc: '主播粉丝达到10000', icon: '✨' },
            { id: 'work_10', name: '多产主播', desc: '主播发布10个作品', icon: '🎬' },
            { id: 'collapse_1', name: '风雨欲来', desc: '经历一次塌房', icon: '⚡' },
            { id: 'ban_1', name: '初次封禁', desc: '经历一次封禁', icon: '🚫' },
            { id: 'day_7', name: '一周粉丝', desc: '连续关注7天', icon: '🗓️' },
            { id: 'day_30', name: '忠实粉丝', desc: '连续关注30天', icon: '📅' },
            { id: 'lucky_reply', name: '幸运儿', desc: '获得主播回复', icon: '🍀' },
            { id: 'all_works', name: '全作品点赞', desc: '点赞所有作品', icon: '❤️' },
            { id: 'active_fan', name: '活跃粉丝', desc: '单日点赞10次', icon: '🔥' }
        ];
        
        // 初始化游戏
        function initGame() {
            // 尝试加载存档
            const savedData = localStorage.getItem('streamerFanSimulator');
            if (savedData) {
                gameData = JSON.parse(savedData);
                if (gameData.nickname) {
                    showProfile();
                    return;
                }
            }
            
            // 生成随机主播数据
            generateHostData();
        }
        
        // 生成主播数据
        function generateHostData() {
            const name = hostNames[Math.floor(Math.random() * hostNames.length)];
            gameData.host.name = name;
            gameData.host.id = 'ID: ' + Math.floor(100000 + Math.random() * 900000);
            gameData.host.avatar = name[0];
            gameData.host.bio = hostBios[Math.floor(Math.random() * hostBios.length)];
            gameData.host.works = Math.floor(Math.random() * 50) + 10;
            gameData.host.likes = Math.floor(Math.random() * 10000) + 1000;
            gameData.host.following = Math.floor(Math.random() * 100) + 10;
            gameData.host.followers = Math.floor(Math.random() * 1000) + 100;
        }
        
        // 开始游戏
        document.getElementById('startBtn').addEventListener('click', function() {
            const nickname = document.getElementById('nicknameInput').value.trim();
            if (!nickname) {
                showNotification('请输入昵称', 'warning');
                return;
            }
            
            gameData.nickname = nickname;
            saveGame();
            showProfile();
            unlockAchievement('first_day');
        });
        
        // 显示主页
        function showProfile() {
            hideAllPages();
            document.getElementById('profilePage').style.display = 'block';
            document.getElementById('bottomNav').style.display = 'flex';
            document.getElementById('nextDayBtn').style.display = 'flex';
            
            updateNavActive(0);
            updateProfile();
            
            // 检查封号状态
            if (gameData.host.isBanned) {
                showBanPage();
            }
        }
        
        // 显示作品页面
        function showWorks() {
            hideAllPages();
            document.getElementById('worksPage').style.display = 'block';
            document.getElementById('bottomNav').style.display = 'flex';
            document.getElementById('nextDayBtn').style.display = 'flex';
            
            updateNavActive(1);
            updateWorksList();
        }
        
        // 显示私信页面
        function showMessages() {
            hideAllPages();
            document.getElementById('messagePage').style.display = 'block';
            document.getElementById('bottomNav').style.display = 'flex';
            document.getElementById('nextDayBtn').style.display = 'flex';
            
            updateNavActive(2);
            updateMessageList();
        }
        
        // 显示成就页面
        function showAchievements() {
            hideAllPages();
            document.getElementById('achievementPage').style.display = 'block';
            document.getElementById('bottomNav').style.display = 'flex';
            document.getElementById('nextDayBtn').style.display = 'flex';
            
            updateNavActive(3);
            updateAchievementList();
        }
        
        // 隐藏所有页面
        function hideAllPages() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('profilePage').style.display = 'none';
            document.getElementById('worksPage').style.display = 'none';
            document.getElementById('messagePage').style.display = 'none';
            document.getElementById('achievementPage').style.display = 'none';
            document.getElementById('banPage').style.display = 'none';
            document.getElementById('commentModal').style.display = 'none';
        }
        
        // 更新导航激活状态
        function updateNavActive(index) {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach((item, i) => {
                if (i === index) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }
        
        // 更新主页数据
        function updateProfile() {
            document.getElementById('hostAvatar').textContent = gameData.host.avatar;
            document.getElementById('hostName').textContent = gameData.host.name;
            document.getElementById('hostId').textContent = gameData.host.id;
            document.getElementById('hostBio').textContent = gameData.host.bio;
            
            animateNumber('worksCount', gameData.host.works);
            animateNumber('likesCount', gameData.host.likes);
            animateNumber('followingCount', gameData.host.following);
            animateNumber('followersCount', gameData.host.followers);
            
            // 更新关注按钮
            const followBtn = document.getElementById('followBtn');
            if (gameData.user.following) {
                followBtn.textContent = '已关注';
                followBtn.classList.add('following');
            } else {
                followBtn.textContent = '关注';
                followBtn.classList.remove('following');
            }
            
            // 关注按钮事件
            followBtn.onclick = function() {
                if (gameData.host.isBanned) {
                    showNotification('主播被封禁中，无法操作', 'warning');
                    return;
                }
                
                gameData.user.following = !gameData.user.following;
                if (gameData.user.following) {
                    gameData.host.followers++;
                    showNotification('关注成功', 'success');
                } else {
                    gameData.host.followers--;
                    showNotification('已取消关注', 'warning');
                }
                updateProfile();
                saveGame();
            };
        }
        
        // 数字动画
        function animateNumber(elementId, targetValue) {
            const element = document.getElementById(elementId);
            const currentValue = parseInt(element.textContent) || 0;
            const increment = (targetValue - currentValue) / 20;
            let step = 0;
            
            const timer = setInterval(() => {
                step++;
                const newValue = Math.floor(currentValue + increment * step);
                element.textContent = formatNumber(newValue);
                
                if (step >= 20) {
                    element.textContent = formatNumber(targetValue);
                    element.classList.add('number-change');
                    setTimeout(() => element.classList.remove('number-change'), 500);
                    clearInterval(timer);
                }
            }, 25);
        }
        
        // 格式化数字
        function formatNumber(num) {
            if (num >= 10000) {
                return (num / 10000).toFixed(1) + 'w';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'k';
            }
            return num.toString();
        }
        
        // 更新作品列表
        function updateWorksList() {
            const worksList = document.getElementById('worksList');
            worksList.innerHTML = '';
            
            // 生成作品
            for (let i = 0; i < gameData.host.works; i++) {
                if (!gameData.works[i]) {
                    gameData.works[i] = {
                        id: i,
                        content: workContents[Math.floor(Math.random() * workContents.length)],
                        likes: Math.floor(Math.random() * 1000) + 100,
                        comments: Math.floor(Math.random() * 100) + 10,
                        collections: Math.floor(Math.random() * 200) + 20,
                        shares: Math.floor(Math.random() * 50) + 5,
                        isLiked: false,
                        isCollected: false,
                        commentsList: []
                    };
                }
                
                const work = gameData.works[i];
                const workItem = document.createElement('div');
                workItem.className = 'work-item';
                workItem.innerHTML = `
                    <div class="work-content">${work.content}</div>
                    <div class="work-actions">
                        <div class="work-action ${work.isLiked ? 'liked' : ''}" onclick="toggleLike(${i})">
                            <div class="work-action-icon">${work.isLiked ? '❤️' : '🤍'}</div>
                            <div class="work-action-text">${formatNumber(work.likes)}</div>
                        </div>
                        <div class="work-action" onclick="showComments(${i})">
                            <div class="work-action-icon">💬</div>
                            <div class="work-action-text">${formatNumber(work.comments)}</div>
                        </div>
                        <div class="work-action ${work.isCollected ? 'collected' : ''}" onclick="toggleCollect(${i})">
                            <div class="work-action-icon">${work.isCollected ? '⭐' : '☆'}</div>
                            <div class="work-action-text">${formatNumber(work.collections)}</div>
                        </div>
                        <div class="work-action" onclick="shareWork(${i})">
                            <div class="work-action-icon">↗️</div>
                            <div class="work-action-text">${formatNumber(work.shares)}</div>
                        </div>
                    </div>
                `;
                worksList.appendChild(workItem);
            }
            
            saveGame();
        }
        
        // 点赞功能
        function toggleLike(workIndex) {
            const work = gameData.works[workIndex];
            if (work.isLiked) {
                work.likes--;
                work.isLiked = false;
                gameData.user.totalLikes--;
                showNotification('已取消点赞', 'warning');
            } else {
                work.likes++;
                work.isLiked = true;
                gameData.user.totalLikes++;
                showNotification('点赞成功', 'success');
                unlockAchievement('first_like');
                
                // 检查是否点赞了所有作品
                const allLiked = gameData.works.every(w => w.isLiked);
                if (allLiked) unlockAchievement('all_works');
                
                // 检查单日点赞数
                if (gameData.user.totalLikes >= 10) unlockAchievement('active_fan');
            }
            
            updateWorksList();
            saveGame();
        }
        
        // 收藏功能
        function toggleCollect(workIndex) {
            const work = gameData.works[workIndex];
            if (work.isCollected) {
                work.collections--;
                work.isCollected = false;
                showNotification('已取消收藏', 'warning');
            } else {
                work.collections++;
                work.isCollected = true;
                showNotification('收藏成功', 'success');
            }
            
            updateWorksList();
            saveGame();
        }
        
        // 分享功能
        function shareWork(workIndex) {
            const work = gameData.works[workIndex];
            work.shares++;
            showNotification('分享成功', 'success');
            updateWorksList();
            saveGame();
        }
        
        // 显示评论
        function showComments(workIndex) {
            const modal = document.getElementById('commentModal');
            modal.style.display = 'block';
            modal.dataset.workIndex = workIndex;
            
            const commentList = document.getElementById('commentList');
            commentList.innerHTML = '';
            
            const work = gameData.works[workIndex];
            
            // 生成评论
            if (!work.commentsList || work.commentsList.length === 0) {
                for (let i = 0; i < work.comments; i++) {
                    work.commentsList.push({
                        user: '用户' + Math.floor(100000 + Math.random() * 900000),
                        content: randomComments[Math.floor(Math.random() * randomComments.length)],
                        time: Math.floor(Math.random() * 24) + '小时前'
                    });
                }
            }
            
            // 显示评论
            work.commentsList.forEach(comment => {
                const commentItem = document.createElement('div');
                commentItem.className = 'comment-item';
                commentItem.innerHTML = `
                    <div class="comment-user">${comment.user}</div>
                    <div class="comment-content">${comment.content}</div>
                    <div class="comment-time">${comment.time}</div>
                `;
                commentList.appendChild(commentItem);
            });
            
            saveGame();
        }
        
        // 关闭评论
        function closeComments() {
            document.getElementById('commentModal').style.display = 'none';
        }
        
        // 发表评论
        function postComment() {
            const input = document.getElementById('commentInput');
            const content = input.value.trim();
            if (!content) {
                showNotification('请输入评论内容', 'warning');
                return;
            }
            
            const workIndex = document.getElementById('commentModal').dataset.workIndex;
            const work = gameData.works[workIndex];
            
            work.commentsList.unshift({
                user: gameData.nickname,
                content: content,
                time: '刚刚'
            });
            
            work.comments++;
            input.value = '';
            showNotification('评论发表成功', 'success');
            unlockAchievement('first_comment');
            
            // 主播概率回复
            if (Math.random() < gameData.host.replyRate) {
                setTimeout(() => {
                    work.commentsList.unshift({
                        user: gameData.host.name,
                        content: '谢谢你的支持！',
                        time: '刚刚'
                    });
                    work.comments++;
                    showComments(workIndex);
                    showNotification('主播回复了你的评论！', 'success');
                    unlockAchievement('lucky_reply');
                }, 2000);
            }
            
            showComments(workIndex);
            updateWorksList();
            saveGame();
        }
        
        // 更新私信列表
        function updateMessageList() {
            const messageList = document.getElementById('messageList');
            messageList.innerHTML = '';
            
            gameData.user.messages.forEach((msg, index) => {
                const messageItem = document.createElement('div');
                messageItem.className = `message-item ${msg.isUser ? 'user' : 'host'}`;
                messageItem.innerHTML = `
                    <div class="message-bubble">${msg.content}</div>
                `;
                messageList.appendChild(messageItem);
            });
            
            // 滚动到底部
            messageList.scrollTop = messageList.scrollHeight;
        }
        
        // 发送私信
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const content = input.value.trim();
            if (!content) {
                showNotification('请输入消息内容', 'warning');
                return;
            }
            
            if (gameData.host.isBanned) {
                showNotification('主播被封禁中，无法发送私信', 'warning');
                return;
            }
            
            // 添加用户消息
            gameData.user.messages.push({
                content: content,
                isUser: true,
                time: Date.now()
            });
            
            gameData.user.totalMessages++;
            input.value = '';
            unlockAchievement('first_message');
            
            // 主播概率回复
            if (Math.random() < gameData.host.replyRate) {
                setTimeout(() => {
                    const replies = [
                        '谢谢你的支持！',
                        '我会继续努力的！',
                        '今天直播见哦',
                        '你的建议我收到了',
                        '一起加油！',
                        '感谢陪伴',
                        '有新作品记得看哦',
                        '今天心情很好'
                    ];
                    
                    const reply = replies[Math.floor(Math.random() * replies.length)];
                    gameData.user.messages.push({
                        content: reply,
                        isUser: false,
                        time: Date.now()
                    });
                    
                    updateMessageList();
                    showNotification('主播回复了你的私信！', 'success');
                    unlockAchievement('lucky_reply');
                }, 1000 + Math.random() * 3000);
            }
            
            updateMessageList();
            saveGame();
        }
        
        // 更新成就列表
        function updateAchievementList() {
            const achievementList = document.getElementById('achievementList');
            achievementList.innerHTML = '';
            
            achievementsList.forEach(achievement => {
                const achievementItem = document.createElement('div');
                achievementItem.className = `achievement-item ${gameData.user.achievements.includes(achievement.id) ? 'unlocked' : ''}`;
                achievementItem.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <div class="achievement-info">
                        <div class="achievement-name">${achievement.name}</div>
                        <div class="achievement-desc">${achievement.desc}</div>
                    </div>
                `;
                achievementList.appendChild(achievementItem);
            });
        }
        
        // 解锁成就
        function unlockAchievement(achievementId) {
            if (!gameData.user.achievements.includes(achievementId)) {
                gameData.user.achievements.push(achievementId);
                const achievement = achievementsList.find(a => a.id === achievementId);
                if (achievement) {
                    showNotification(`🏆 解锁成就：${achievement.name}`, 'success');
                }
                saveGame();
            }
        }
        
        // 显示封号页面
        function showBanPage() {
            hideAllPages();
            document.getElementById('banPage').style.display = 'block';
            document.getElementById('bottomNav').style.display = 'none';
            document.getElementById('nextDayBtn').style.display = 'none';
            
            const banReasons = ['违反社区规定', '发布不当内容', '涉嫌违规操作', '用户举报属实'];
            document.getElementById('banReason').textContent = banReasons[Math.floor(Math.random() * banReasons.length)];
            
            if (gameData.host.banDays > 0 && gameData.host.banDays < 999) {
                document.getElementById('banCountdown').textContent = `距离解封还有 ${gameData.host.banDays} 天`;
            } else if (gameData.host.banDays === 999) {
                document.getElementById('banCountdown').textContent = '永久封禁';
            }
            
            // 根据封号类型显示不同内容
            const hostAvatar = document.getElementById('hostAvatar');
            const hostName = document.getElementById('hostName');
            const profileInfo = document.querySelector('.profile-info');
            const profileStats = document.querySelector('.profile-stats');
            const worksList = document.getElementById('worksList');
            
            switch (gameData.host.banType) {
                case 1: // 头像变白，名字和ID一样，显示封禁，不显示作品
                    hostAvatar.style.background = 'linear-gradient(135deg, #64748b 0%, #475569 100%)';
                    hostAvatar.style.color = '#cbd5e1';
                    hostName.textContent = '已封禁';
                    profileInfo.style.opacity = '0.5';
                    profileStats.style.display = 'none';
                    break;
                case 2: // 头像、名字、ID、作品不变，显示封禁
                    // 正常显示，但添加封禁标识
                    const banBadge = document.createElement('div');
                    banBadge.textContent = '封禁中';
                    banBadge.style.cssText = `
                        position: absolute;
                        top: 10px;
                        right: 10px;
                        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
                        color: white;
                        padding: 5px 15px;
                        border-radius: 20px;
                        font-size: 12px;
                        font-weight: bold;
                        box-shadow: 0 2px 10px rgba(220, 38, 38, 0.3);
                        z-index: 10;
                    `;
                    document.querySelector('.profile-header').appendChild(banBadge);
                    break;
                case 3: // 头像、名字、ID不变，作品不显示，显示封禁
                    // 添加封禁标识
                    const banBadge3 = document.createElement('div');
                    banBadge3.textContent = '封禁中';
                    banBadge3.style.cssText = `
                        position: absolute;
                        top: 10px;
                        right: 10px;
                        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
                        color: white;
                        padding: 5px 15px;
                        border-radius: 20px;
                        font-size: 12px;
                        font-weight: bold;
                        box-shadow: 0 2px 10px rgba(220, 38, 38, 0.3);
                        z-index: 10;
                    `;
                    document.querySelector('.profile-header').appendChild(banBadge3);
                    break;
            }
        }
        
        // 申诉封号
        function appealBan() {
            if (Math.random() < 0.3) {
                gameData.host.isBanned = false;
                gameData.host.banDays = 0;
                gameData.host.banType = 0;
                showNotification('申诉成功，账号已解封！', 'success');
                showProfile();
                saveGame();
            } else {
                showNotification('申诉失败，请稍后再试', 'warning');
            }
        }
        
        // 下一天
        function nextDay() {
            gameData.day++;
            
            // 随机事件
            triggerRandomEvent();
            
            // 主播行为
            hostBehavior();
            
            // 检查封号
            if (gameData.host.isBanned && gameData.host.banDays > 0) {
                gameData.host.banDays--;
                if (gameData.host.banDays === 0) {
                    gameData.host.isBanned = false;
                    gameData.host.banType = 0;
                    showNotification('主播账号已解封', 'success');
                }
            }
            
            // 检查成就
            checkAchievements();
            
            saveGame();
            showNotification(`第 ${gameData.day} 天`, 'success');
            
            // 更新页面
            if (document.getElementById('profilePage').style.display === 'block') {
                updateProfile();
            } else if (document.getElementById('worksPage').style.display === 'block') {
                updateWorksList();
            }
        }
        
        // 触发随机事件
        function triggerRandomEvent() {
            const events = [];
            
            // 根据塌房等级调整事件概率
            const collapseModifier = gameData.host.collapseLevel * 0.2;
            
            // 涨粉事件
            if (Math.random() < 0.3 - collapseModifier) {
                const gain = Math.floor(Math.random() * 100) + 10;
                gameData.host.followers += gain;
                events.push(`主播发布了优质内容，涨粉 ${gain} 人`);
            }
            
            // 掉粉事件
            if (Math.random() < 0.2 + collapseModifier) {
                const loss = Math.floor(Math.random() * 50) + 5;
                gameData.host.followers = Math.max(0, gameData.host.followers - loss);
                events.push(`主播热度下降，掉粉 ${loss} 人`);
            }
            
            // 塌房事件
            if (gameData.host.collapseLevel === 0 && Math.random() < 0.05) {
                gameData.host.collapseLevel = 1;
                events.push('主播疑似塌房，粉丝议论纷纷');
                unlockAchievement('collapse_1');
            }
            
            // 封禁事件
            if (!gameData.host.isBanned && Math.random() < 0.03) {
                const banTypes = [1, 3, 15, 30, 999];
                const banDays = banTypes[Math.floor(Math.random() * banTypes.length)];
                gameData.host.isBanned = true;
                gameData.host.banDays = banDays;
                gameData.host.banType = Math.floor(Math.random() * 3) + 1;
                events.push(`主播因违规被封禁 ${banDays === 999 ? '永久' : banDays + '天'}`);
                unlockAchievement('ban_1');
            }
            
            // 显示事件通知
            if (events.length > 0) {
                const randomEvent = events[Math.floor(Math.random() * events.length)];
                showNotification(randomEvent, 'warning');
            }
        }
        
        // 主播行为
        function hostBehavior() {
            if (gameData.host.isBanned) return;
            
            // 发布作品
            if (gameData.host.collapseLevel < 2 && Math.random() < gameData.host.postRate) {
                gameData.host.works++;
                showNotification('主播发布了新作品', 'success');
                
                // 更新作品列表
                const newWork = {
                    id: gameData.works.length,
                    content: workContents[Math.floor(Math.random() * workContents.length)],
                    likes: Math.floor(Math.random() * 500) + 50,
                    comments: Math.floor(Math.random() * 50) + 5,
                    collections: Math.floor(Math.random() * 100) + 10,
                    shares: Math.floor(Math.random() * 30) + 3,
                    isLiked: false,
                    isCollected: false,
                    commentsList: []
                };
                gameData.works.unshift(newWork);
            }
            
            // 塌房后删除作品
            if (gameData.host.collapseLevel >= 2 && Math.random() < gameData.host.deleteRate) {
                if (gameData.works.length > 0) {
                    gameData.works.shift();
                    gameData.host.works = Math.max(0, gameData.host.works - 1);
                    showNotification('主播删除了一个作品', 'warning');
                }
            }
            
            // 长期不更新掉粉
            if (gameData.day - gameData.host.lastUpdateDay > 3) {
                const loss = Math.floor(Math.random() * 20) + 5;
                gameData.host.followers = Math.max(0, gameData.host.followers - loss);
                gameData.host.lastUpdateDay = gameData.day;
            }
        }
        
        // 检查成就
        function checkAchievements() {
            // 粉丝数成就
            if (gameData.host.followers >= 100) unlockAchievement('fan_100');
            if (gameData.host.followers >= 1000) unlockAchievement('fan_1000');
            if (gameData.host.followers >= 10000) unlockAchievement('fan_10000');
            
            // 作品数成就
            if (gameData.host.works >= 10) unlockAchievement('work_10');
            
            // 天数成就
            if (gameData.day >= 7) unlockAchievement('day_7');
            if (gameData.day >= 30) unlockAchievement('day_30');
        }
        
        // 显示通知
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `event-notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // 保存游戏
        function saveGame() {
            localStorage.setItem('streamerFanSimulator', JSON.stringify(gameData));
        }
        
        // 监听回车键
        document.getElementById('nicknameInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('startBtn').click();
            }
        });
        
        document.getElementById('messageInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        document.getElementById('commentInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                postComment();
            }
        });
        
        // 点击模态框外部关闭
        document.getElementById('commentModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeComments();
            }
        });
        
        // 防止双击缩放
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(e) {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        
        // 初始化
        initGame();
    </script>
    <!-- 1. 在 <body> 末尾（</body> 之前）插入重新启动按钮 -->
<button class="next-day-btn" id="restartBtn" style="bottom:100px;right:90px;background:linear-gradient(135deg,#6b7280 0%,#ef4444 100%);">
  <div class="next-day-icon">🔄</div>
  <div class="next-day-text">重开</div>
</button>

<script>
/* 2. 重新开始逻辑 */
document.getElementById('restartBtn').addEventListener('click',function(){
  if(confirm('确定要重新开始吗？当前进度会全部清空！')){
    localStorage.removeItem('streamerFanSimulator');
    location.reload();
  }
});
</script>

</body>
</html>
